:root {
  --whitespace: 4px;
  --whitespace-mul2: calc(var(--whitespace) * 2);
  --whitespace-div2: calc(var(--whitespace) / 2);
  --whitespace-div4: calc(var(--whitespace) / 4);
  --task-height: auto;
  --task-section-min-height: auto;
  --task-section-max-height: auto;
  --column-width: 350px;
  --collapsed-column-width: 40px;

  /* Z-index layers for consistent stacking */
  --z-base: 1;
  --z-overlay-button: 10;
  --z-corner-badge: 100;
  --z-dropdown: 1000;
  --z-modal: 10000;
  --z-modal-overlay: 10001;
  --z-search-modal: 100001;

  /* Task and section highlight colors */
  --task-focus-color: gray;
  --section-focus-color: gray;

  /* Week tag highlighting */
  --current-week-highlight-color: #ff0000;
  --current-week-border-width: 3px;
  --current-week-border-style: solid;
  --current-week-glow-size: 0 0 10px;

  --board-background: var(--vscode-editor-background);
  --column-background: var(--vscode-editor-background);
  --task-background: var(--vscode-editor-background);

  /* Primary Button Styles */
  --button-background: var(--vscode-button-background);
  --button-foreground: var(--vscode-button-foreground);
  --button-border: 1px solid var(--vscode-button-border, transparent);
  --button-background-hover: var(--vscode-button-hoverBackground);
  --button-foreground-hover: var(--vscode-button-foreground);
  --button-background-active: var(--vscode-button-background);
  --button-foreground-active: var(--vscode-button-foreground);
  --button-border-active: 1px solid var(--vscode-inputValidation-infoBorder, transparent);

  /* Secondary Button Styles */
  --button-secondary-background: var(--vscode-button-secondaryBackground);
  --button-secondary-foreground: var(--vscode-button-secondaryForeground);
  --button-secondary-border: 1px solid var(--vscode-button-border, transparent);
  --button-secondary-background-hover: var(--vscode-button-secondaryHoverBackground);

  /* Alternative Button Styles (for drag handles and card sources) */
  --button-alternative-background: var(--vscode-button-secondaryBackground);
  --button-alternative-foreground: var(--vscode-button-secondaryForeground);
  --button-alternative-border: 1px solid var(--vscode-button-border, transparent);
  --button-alternative-background-hover: var(--vscode-button-secondaryHoverBackground);
  --button-alternative-foreground-hover: var(--vscode-button-secondaryForeground);
  --button-alternative-border-hover: 1px solid var(--vscode-button-border, transparent);
  --button-alternative-background-active: var(--vscode-button-secondaryBackground);
  --button-alternative-foreground-active: var(--vscode-button-secondaryForeground);
  --button-alternative-border-active: 1px solid var(--vscode-inputValidation-infoBorder, transparent);
}

body {
  font-family: var(--vscode-font-family);
  color: var(--vscode-foreground);
  background-color: var(--board-background);
  margin: 0;
  padding: 0;
  overflow: hidden; /* Prevent body scroll - container handles it */
  height: 100vh;

  transform-style: preserve-3d;
  perspective: 9999px;
}

/* File info bar - fixed at top */
.file-info-bar {
  /* background-color: var(--board-background); */
  border-bottom: 1px solid var(--vscode-panel-border);
  padding: var(--whitespace-div2);
  position: fixed;
  z-index: 100;
  top: 0;
  left: 0;
  right: 0;
  /* Container query support for responsive text hiding */
  container-type: inline-size;
  container-name: file-info-bar;
}

/* Hidden utility class */
.hidden {
  display: none !important;
}

/* Faded/disabled visual state */
.faded {
  opacity: 0.5;
}

/* Disabled section styling */
.disabled-section {
  opacity: 0.5;
  pointer-events: none;
}

.disabled-section input,
.disabled-section select,
.disabled-section button {
  cursor: not-allowed;
}

/* Color variants - Overlay (semi-transparent buttons on content) */
/* Shared base for ALL overlay menu buttons: image, video, diagram, include */
.btn-overlay-icon,
.image-path-overlay-container .image-menu-btn,
.video-path-overlay-container .video-menu-btn,
.diagram-overlay-container .diagram-menu-btn,
.include-path-overlay-container .include-menu-btn {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 18px;
  height: 18px;
  background: rgba(0, 0, 0, 0.6);
  border: none;
  border-radius: 4px;
  color: white;
  font-size: 14px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 10;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-overlay-icon:hover,
.image-path-overlay-container .image-menu-btn:hover,
.video-path-overlay-container .video-menu-btn:hover,
.diagram-overlay-container .diagram-menu-btn:hover,
.include-path-overlay-container .include-menu-btn:hover {
  background: rgba(0, 0, 0, 0.8);
}

/* Show on hover */
.image-path-overlay-container:hover .image-menu-btn,
.video-path-overlay-container:hover .video-menu-btn,
.diagram-overlay-container:hover .diagram-menu-btn,
.include-path-overlay-container:hover .include-menu-btn {
  opacity: 1;
}

/* Include ERROR state: RED colors (like broken images should have been) */
.include-path-overlay-container.include-broken .columninclude-link,
.include-path-overlay-container.include-broken .include-filename-link, 
.include-error .include-path-overlay-container .include-menu-btn,
.include-container.include-error .include-path-overlay-container .include-menu-btn,
.kanban-full-height-column.include-error .include-path-overlay-container .include-menu-btn,
.task-item.include-error .include-path-overlay-container .include-menu-btn,
.image-path-overlay-container.image-broken .image-menu-btn,
.video-path-overlay-container.video-broken .video-menu-btn,
.include-path-overlay-container.include-broken .include-menu-btn { /*  ,
.include-error .column-title */
  opacity: 1 !important;
  outline: 2px solid var(--vscode-errorBorder, rgba(255, 0, 0, 0.6)) !important;
  outline-offset: -1px !important;
  background: var(--vscode-errorBackground, rgba(255, 0, 0, 0.2)) !important;
  border-radius: 2px;
  background-color: var(--vscode-errorBackground, rgba(255, 0, 0, 0.2)) !important;
  color: var(--vscode-errorForeground, #f88) !important;
  border: 1px solid var(--vscode-errorBorder, rgba(255, 0, 0, 0.6)) !important;
}

.include-error .include-path-overlay-container .include-menu-btn,
.task-item.include-error .include-path-overlay-container .include-menu-btn,
.include-path-overlay-container.include-broken .include-menu-btn {
  right: -22px;
  top: 0px;
}

/* ============================================
   UTILITY CLASSES
   Common reusable patterns
   ============================================ */

/* Flexbox utilities */
.flex { display: flex; }
.flex-inline { display: inline-flex; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-end { justify-content: flex-end; }

/* Gap utilities */
.gap-1 { gap: 4px; }
.gap-2 { gap: 8px; }
.gap-3 { gap: 12px; }
.gap-4 { gap: 16px; }

/* Transition utilities */
.transition-smooth {
  transition: all 0.15s ease;
}

.transition-colors {
  transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}

/* Text utilities */
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.text-center { text-align: center; }
.text-right { text-align: right; }
.font-bold { font-weight: bold; }
.font-medium { font-weight: 500; }

/* Visibility */
.invisible { visibility: hidden; }
.pointer-events-none { pointer-events: none; }

.file-info-content {
  display: grid;
  /* Left: flexible but prefers natural size, Center: flexible with min width to prevent sudden collapse, Right: auto (natural size) */
  grid-template-columns: minmax(0, auto) minmax(120px, 1fr) auto;
  align-items: center;
  height: 100%;
  gap: 8px;
}

.file-info-left {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
  overflow: hidden;
  flex-shrink: 1;
}

.file-info-center {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  min-width: 0;
  overflow: visible; /* Allow dropdowns to appear */
  flex-shrink: 1;
}

.file-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.file-name {
  color: var(--vscode-titleBar-activeForeground);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: fit-content;
  cursor: pointer;
  transition: color 0.2s ease;
}

.file-name:hover {
  color: var(--vscode-textLink-activeForeground);
  text-decoration: underline;
}

.file-info-right {
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: flex-end;
  overflow: hidden;
  flex-shrink: 0; /* Right section keeps its size, left/center shrink first */
}

/* ============================================================================
   RESPONSIVE FILE-INFO HEADER - Text hiding when space is limited
   Uses CSS Container Queries with media query fallback
   ============================================================================ */

/* Text elements that can be hidden - base styles */
.global-fold-text,
.sort-text,
.refresh-text,
.layout-presets-text {
  display: inline;
  overflow: hidden;
  white-space: nowrap;
}

/* Container query: Hide text when file-info-bar is narrow (below 1000px) */
@container file-info-bar (max-width: 1000px) {
  .global-fold-text,
  .sort-text,
  .refresh-text,
  .layout-presets-text {
    display: none !important;
  }

  /* Make template select compact - just show dropdown arrow */
  .template-select {
    width: 20px !important;
    min-width: 20px !important;
    padding: 0 2px !important;
    color: transparent !important;
  }
}

/* Compact mode at medium widths */
@container file-info-bar (max-width: 700px) {
  .file-name {
    max-width: 100px;
  }

  .file-info-content {
    gap: 4px;
  }

  .file-info-left,
  .file-info-center,
  .file-info-right {
    gap: 4px;
  }
}

/* Very compact at narrow widths */
@container file-info-bar (max-width: 500px) {
  .file-name {
    max-width: 60px;
  }

  .file-info-content {
    gap: 2px;
  }

  .file-info-left,
  .file-info-center,
  .file-info-right {
    gap: 2px;
  }

  /* Hide marp menu at very narrow widths */
  .marp-global-menu {
    display: none;
  }
}

/* Extremely narrow - hide center section elements */
@container file-info-bar (max-width: 350px) {
  .file-info-content {
    /* Only left and right, no center - override the min-width */
    grid-template-columns: minmax(0, 1fr) 0 auto;
  }

  .file-info-center {
    display: none;
    min-width: 0 !important;
  }

  .file-name {
    max-width: 40px;
  }
}

/* Media query fallback for browsers without container query support */
@supports not (container-type: inline-size) {
  @media (max-width: 1000px) {
    .global-fold-text,
    .sort-text,
    .refresh-text,
    .layout-presets-text {
      display: none !important;
    }

    .file-name {
      max-width: 80px;
    }

    .file-info-content,
    .file-info-left,
    .file-info-center,
    .file-info-right {
      gap: 4px;
    }
  }
}

/* ============================================================================
   IMMEDIATE CSS TOOLTIPS - Shows on hover without delay
   ============================================================================ */

/* All file-info-bar elements with title get immediate tooltip */
.file-info-bar [title] {
  position: relative;
}

/* Tooltip appears immediately on hover - below the element */
.file-info-bar [title]:hover::after {
  content: attr(title);
  position: absolute;
  top: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--vscode-editorWidget-background, #252526);
  color: var(--vscode-editorWidget-foreground, #cccccc);
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: normal;
  white-space: nowrap;
  z-index: 10000;
  pointer-events: none;
  border: 1px solid var(--vscode-editorWidget-border, #454545);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Small arrow pointing up */
.file-info-bar [title]:hover::before {
  content: '';
  position: absolute;
  top: calc(100% + 2px);
  left: 50%;
  transform: translateX(-50%);
  border: 4px solid transparent;
  border-bottom-color: var(--vscode-editorWidget-border, #454545);
  z-index: 10001;
  pointer-events: none;
}

/* Don't show tooltip for elements without meaningful title or nested elements */
.file-info-bar [title=""]:hover::after,
.file-info-bar [title=""]:hover::before {
  display: none;
}

/* Prevent double tooltips - only show on direct interactive elements, not wrappers */
.file-info-bar .marp-global-menu:hover::after,
.file-info-bar .marp-global-menu:hover::before,
.file-info-bar .layout-presets-menu-container:hover::after,
.file-info-bar .layout-presets-menu-container:hover::before,
.file-info-bar .file-bar-menu:hover::after,
.file-info-bar .file-bar-menu:hover::before {
  display: none;
}

/* ============================================================================
   DRAG MENU - Hover menus for Cards and Columns/Stacks
   ============================================================================ */

.drag-menu {
  position: relative;
  display: inline-block;
}

.drag-menu-trigger {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  height: 22px;
  min-height: 22px;
  background: var(--button-alternative-background);
  color: var(--button-alternative-foreground);
  border: var(--button-border);
  border-radius: 3px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
  user-select: none;
}

.drag-menu-trigger:hover {
  background: var(--button-alternative-background-hover);
  color: var(--button-alternative-foreground-hover);
}

.drag-menu-icon {
  font-size: 14px;
  line-height: 1;
}

.drag-menu-label {
  font-size: 12px;
  white-space: nowrap;
}

/* Dropdown menu - appears on hover */
.drag-menu-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 160px;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  z-index: 10000;
  padding: 4px 0;
  padding-top: 8px; /* Extra padding at top for visual gap */
  margin-top: 0; /* No gap - continuous hover zone */
}

/* Invisible bridge to maintain hover when moving to dropdown */
.drag-menu-dropdown::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 0;
  right: 0;
  height: 8px;
  background: transparent;
}

.drag-menu:hover .drag-menu-dropdown {
  display: block;
}

/* Menu items - draggable */
.drag-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: grab;
  font-size: 12px;
  color: var(--vscode-dropdown-foreground);
  background: transparent;
  transition: background 0.1s ease;
  user-select: none;
  white-space: nowrap;
}

.drag-menu-item:hover {
  background: var(--vscode-list-hoverBackground);
}

.drag-menu-item:active,
.drag-menu-item.dragging {
  cursor: grabbing;
  opacity: 0.6;
}

.drag-menu-item-icon {
  font-size: 14px;
  line-height: 1;
  flex-shrink: 0;
}

.drag-menu-item-text {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Hide label text at narrow widths */
@container file-info-bar (max-width: 1000px) {
  .drag-menu-label {
    display: none;
  }
}

/* Prevent tooltip on drag menu (has its own dropdown) */
.file-info-bar .drag-menu-trigger:hover::after,
.file-info-bar .drag-menu-trigger:hover::before {
  display: none;
}

/* Consistent styling for all file-info header buttons */
.file-info-left .global-fold-btn,
.file-info-left .sort-btn,
.file-info-right .global-fold-btn,
.file-info-right .sort-btn,
.file-info-right .global-sticky-btn,
.file-info-right .font-size-btn,
.file-info-right .refresh-btn,
.file-info-right .auto-export-btn,
.file-info-right .layout-presets-btn,
.file-info-right .file-bar-menu-btn,
.file-info-right .processes-menu-btn {
  border: var(--button-border);
  padding: 2px 4px;
  margin: 0;
  height: 22px;
  min-height: 22px;
  width: auto;
  min-width: 22px;
  justify-content: center;
  gap: 4px;
  font-size: 12px;
  border-radius: 3px;
}

.file-info-right .file-bar-menu-btn {
  padding: 4px 4px;
}

.file-info-left .sort-btn,
.file-info-right .sort-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
}

.file-info-left .sort-btn:hover,
.file-info-right .sort-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

/* Text styling for button labels */
.menu-text {
  font-weight: 500;
}

.menu-icon {
  font-size: 14px;
}

/* ============================================================================
   TOOLBAR BUTTONS - Consolidated primary button styles
   ============================================================================ */

/* Shared primary button base styles */
.refresh-btn,
.auto-export-btn,
.global-sticky-btn,
.layout-presets-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
}

/* Shared hover states */
.refresh-btn:hover,
.auto-export-btn:hover,
.global-sticky-btn:hover,
.layout-presets-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

/* Shared active states */
.auto-export-btn.active,
.layout-presets-btn.active {
  background: var(--button-background-active);
  color: var(--button-foreground-active);
  border: var(--button-border-active);
}

/* Button-specific styles */
.global-sticky-btn {
  font-size: 14px;
}

.refresh-btn.pending {
  background: var(--vscode-inputValidation-warningBackground);
  color: var(--vscode-inputValidation-warningForeground);
  border-color: var(--vscode-inputValidation-warningBorder);
}

.refresh-btn.saved {
  background: var(--vscode-inputValidation-infoBackground);
  color: var(--vscode-inputValidation-infoForeground);
  border-color: var(--vscode-inputValidation-infoBorder);
}

.auto-export-btn.active {
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* ============= PROCESSES MENU ============= */
.processes-menu {
  position: relative;
  z-index: 100;
}

.processes-menu.active {
  z-index: 1000;
  isolation: isolate;
}

/* .processes-menu-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 4px;
  position: relative;
} */

.processes-menu-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

.processes-indicator {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--vscode-statusBarItem-warningBackground, #f0ad4e);
}

.processes-indicator.active {
  background: var(--vscode-charts-green, #4caf50);
  animation: pulse 1.5s infinite;
}

.processes-menu-dropdown {
  display: none;
  position: fixed;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  padding: 8px;
  min-width: 220px;
  z-index: 2147483647;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.processes-menu.active .processes-menu-dropdown {
  display: block;
}

.processes-menu-header {
  font-weight: 600;
  padding: 4px 8px;
  color: var(--vscode-foreground);
  border-bottom: 1px solid var(--vscode-panel-border);
  margin-bottom: 8px;
}

.processes-section {
  padding: 4px 0;
}

.processes-section-title {
  font-weight: 500;
  padding: 4px 8px;
  color: var(--vscode-foreground);
  display: flex;
  align-items: center;
  gap: 6px;
}

.processes-section-content {
  padding: 4px 8px;
}

.processes-status-row {
  display: flex;
  justify-content: space-between;
  padding: 2px 0;
  font-size: 12px;
}

.processes-status-label {
  color: var(--vscode-descriptionForeground);
}

.processes-status-value {
  color: var(--vscode-foreground);
}

.processes-status-value.scanning {
  color: var(--vscode-charts-yellow, #f0ad4e);
}

.processes-status-value.complete {
  color: var(--vscode-charts-green, #4caf50);
}

.processes-actions {
  margin-top: 8px;
  display: flex;
  gap: 8px;
}

.processes-action-btn {
  padding: 4px 8px;
  font-size: 12px;
  background: var(--vscode-button-secondaryBackground);
  color: var(--vscode-button-secondaryForeground);
  border: 1px solid var(--vscode-button-border, transparent);
  border-radius: 4px;
  cursor: pointer;
}

.processes-action-btn:hover {
  background: var(--vscode-button-secondaryHoverBackground);
}

.processes-action-btn.stop-btn {
  background: var(--vscode-statusBarItem-errorBackground, #d32f2f);
  color: white;
}

.processes-action-btn.stop-btn:hover {
  opacity: 0.9;
}

.processes-menu-divider {
  height: 1px;
  background: var(--vscode-panel-border);
  margin: 8px 0;
}

/* Layout Presets Menu */
.layout-presets-menu-container {
  position: relative;
  display: inline-block;
}

.layout-presets-dropdown {
  position: fixed;
  min-width: 200px;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  display: none;
  padding: 4px 0;
}

.layout-presets-dropdown.show {
  display: block;
}

.layout-preset-item {
  display: flex;
  flex-direction: column;
  padding: 8px 12px;
  cursor: pointer;
  border: none;
  background: none;
  color: var(--vscode-dropdown-foreground);
  text-align: left;
  width: 100%;
}

.layout-preset-item:hover {
  background: var(--vscode-list-hoverBackground);
}

.layout-preset-item.active {
  background: var(--vscode-list-activeSelectionBackground);
  color: var(--vscode-list-activeSelectionForeground);
}

.layout-preset-label {
  font-weight: 500;
  font-size: 13px;
  margin-bottom: 2px;
}

.layout-preset-description {
  font-size: 11px;
  opacity: 0.8;
  color: var(--vscode-descriptionForeground);
}

/* NOTE: Responsive file-info header styles are consolidated near the top of this file
   under the .file-info-bar container query section */

/* Small font mode for cards */
body.small-card-fonts .task-item {
  font-size: 0.75em;
}

body.small-card-fonts .task-title-display,
body.small-card-fonts .task-description-display {
  font-size: 0.85em;
  line-height: 1.3;
}

body.small-card-fonts .task-item {
  padding: 6px;
}

body.small-card-fonts .task-header {
  gap: 6px;
  margin-bottom: 3px;
}

/* Smaller images in small font mode */
body.small-card-fonts .task-description-container .markdown-content img {
  max-width: 48%;
  max-height: 200px;
  display: inline-block;
  vertical-align: top;
  margin: 2px 2px;
}

body.small-card-fonts .task-title-container .markdown-content img {
  max-width: 48%;
  max-height: 30px;
  margin: 1px 1px;
}

/* Hide collapsed add task button in column header */
.collapsed-add-task-btn {
  display: none !important;
}

/* Clipboard hover preview */
.clipboard-preview {
  position: absolute;
  top: calc(100% + var(--whitespace-div2));
  left: 50%;
  transform: translateX(-50%);
  background: var(--vscode-editorHoverWidget-background);
  border: 1px solid var(--vscode-editorHoverWidget-border);
  border-radius: 6px;
  padding: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  max-width: 300px;
  display: none;
  pointer-events: none;
}

.clipboard-preview.show {
  display: block;
}

.clipboard-preview-header {
  font-size: 12px;
  font-weight: 600;
  color: var(--vscode-editorHoverWidget-foreground);
  border-bottom: 1px solid var(--vscode-editorHoverWidget-border);
  padding-bottom: 4px;
}

.clipboard-preview-image {
  max-width: 280px;
  max-height: 200px;
  border-radius: 4px;
  border: 1px solid var(--vscode-editorHoverWidget-border);
}

.clipboard-preview-text {
  font-size: 11px;
  color: var(--vscode-editorHoverWidget-foreground);
  font-family: var(--vscode-editor-font-family);
  word-break: break-word;
  max-height: 100px;
  overflow-y: auto;
}

/* Small screen layout adjustments */
@media (max-width: 480px) {
  .file-info-center {
    gap: 4px;
  }
}

/* Main container - fills viewport below file bar */
#kanban-container {
  /* background-color: var(--board-background); */
  position: fixed;
  top: calc(var(--whitespace) + 4px + 24px);
  left: 0;
  right: 0;
  bottom: 0;
  overflow-x: auto;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

/* Kanban board */
.kanban-board {
  display: flex;
  flex-wrap: nowrap;
  width: max-content; /* Allow horizontal expansion */
  align-items: flex-start;
}

/* when it has no child - kanban-row */
.kanban-board:not(:has(.kanban-row)) {
	gap: var(--whitespace);
	padding-left: var(--whitespace);
	padding-right: var(--whitespace);
}

.kanban-board.multi-row {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
	overflow: auto;
}

/* Kanban columns - Full height wrapper for sticky positioning */
.kanban-full-height-column {
  /* Transparent wrapper that provides full height for sticky positioning */
  /* background-color: transparent; */
  border: none;
  width: var(--column-width);
  flex-shrink: 0;
  position: relative;
  min-height: 100%;
  transition: all 0.3s ease;
  overflow: visible;
  display: flex;
  flex-direction: column;
  padding: 0;
}

.kanban-full-height-column.collapsed-vertical {
    width: 32px;
}

.kanban-full-height-column.collapsed-vertical .column-title-section {
	flex-direction: column !important;
	align-items: center;
}

/* Note: .column-footer is defined later in the file with complete styling */

.column-content {
  /* This contains the actual visual column with border and background */
  display: flex;
  flex-direction: column;
  padding: var(--whitespace-div4)  var(--whitespace-div2) var(--whitespace-div4) var(--whitespace-div2);
  flex: 0 0 auto;
  /* background-color: var(--vscode-editor-background); */
  /* border-radius: 0 0 var(--whitespace-div4) var(--whitespace-div4); */
  /* border: 0.5px solid var(--vscode-panel-border); */
  border-top: none;
  margin: 0 var(--whitespace) var(--whitespace) var(--whitespace);
}

.header-bars-container,
.footer-bars-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  flex-shrink: 0;
}

.header-bars-container {
  order: -1;
  /* position: sticky; */ /* should be sticky, but for the moment we dont implement it as the column header must not be overlapped when scrolling */
  /* top: 0px; */
  z-index: 9;
  background-color: var(--vscode-editor-background);
}

.footer-bars-container {
  order: 999;
  margin-top: auto;
}

/* Footer bars in stacked columns are part of sticky column-footer */
.kanban-column-stack .column-footer > .stacked-footer-bars {
  position: relative;
  /* background-color: var(--vscode-titleBar-activeBackground);; */
  margin-top: 0;
  width: 100%;
  flex-shrink: 0;
}

/* Ensure header/footer bars work in task items */
.task-item .header-bars-container {
  order: -1;
  flex-shrink: 0;
}

.task-item .footer-bars-container {
  order: 999;
  flex-shrink: 0;
}

/* Column header - receives tag-based header bars, can be styled/faded independently */
.column-header {
  z-index: 11;
	padding-bottom: var(--whitespace-div4);
	position: sticky;
	border-radius: 4px 4px 0px 0px;
  background-color: var(--column-background);
}

/* Column title */
.column-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 10;
  background-color: var(--column-background);
  border-top: none;
  border-bottom: none;
  margin-bottom: 0;
  flex-direction: column;
  position: relative;
}

/* Add dashed top and bottom borders with pseudo-elements */
.column-title::before,
.column-title::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 1px;
  background-image: repeating-linear-gradient(
    90deg,
    color-mix(in srgb, var(--vscode-panel-border) 50%, transparent),  /* 50% transparent dash */
    color-mix(in srgb, var(--vscode-panel-border) 50%, transparent) 4px,
    transparent 4px,
    transparent 10px  /* Dash + gap total */
  );
}

.column-title::before {
  top: 0;
}

.column-title::after {
  bottom: 0;
}

.column-inner {
  /* This is the scrollable container for sticky positioning */
  flex: 1;
  display: flex;
  flex-direction: column;
  /* overflow-y: auto; */ /* must be disabled for sticky childs to work */
	/* border-bottom: 0.5px solid var(--vscode-panel-border); */
	/* border-radius: 0px 0px 4px 4px; */
  overflow-x: visible;
  /* min-height: 100%; */
	max-height: min-content;
  background-color: var(--column-background);
}

.column-footer {
	padding-top: var(--whitespace-div4);
  background-color: var(--column-background);
	position: sticky;
  height: 4px;
	/* top: 28px; */
	/* border-bottom: 0.5px solid var(--vscode-panel-border); */
	border-radius: 0px 0px 4px 4px;
}

/* Column title section */
.column-title-section {
  padding: 0 var(--whitespace-div2); /* left & right */
  display: flex;
  /* align-items: flex-start; */
	align-items: center;
  gap: var(--whitespace-div4);
  flex: 1;
  min-width: 0;
  margin-top: 0;
  width: -webkit-fill-available;
}

/* Title container that should expand to fill available space */
.column-title-container {
  flex: auto;
  margin-left: 2px;
  /* min-width: 0;
  display: flex;
  flex-direction: column; */
}

/* Column title text */
.column-title-text {
  cursor: pointer;
  border-radius: 3px;
  min-width: 0;
  word-break: break-word;
  display: block;
  margin: 0;
  min-height: 16px;
  width: 100%;
  flex: 1;
  white-space: normal;
  overflow-wrap: break-word;
  max-height: none;
}

.column-title-text:has(:not(include-broken)):hover {
  background-color: var(--vscode-list-hoverBackground);
}

/* Column and Task include link styling */
.columninclude-link,
.include-filename-link {
  color: var(--vscode-textLink-foreground);
  text-decoration: underline;
  cursor: pointer;
  word-break: break-all;
  font-weight: 500;
}

.columninclude-link:hover,
.include-filename-link:hover {
  color: var(--vscode-textLink-activeForeground);
  background-color: rgba(var(--vscode-textLink-activeForeground-rgb, 0, 122, 204), 0.1);
}

/* Strikethrough styling */
.strikethrough-container {
  position: relative;
  display: inline;
}

/* Strikethrough visual effects for broken images and links */
.strikethrough-content img,
.strikethrough-content a {
  text-decoration: line-through !important;
  opacity: 0.6;
  filter: grayscale(100%);
}

.strikethrough-content img {
  /* Add visual indicator for broken images */
  border: 1px dashed var(--vscode-errorForeground, #f48771);
  background-color: var(--vscode-errorBackground, rgba(244, 135, 113, 0.1));
  /* Make broken images smaller and not full width */
  max-width: 200px !important;
  width: auto !important;
  height: auto !important;
  display: inline-block !important;
}

.strikethrough-content a {
  /* Style for broken links */
  color: var(--vscode-errorForeground, #f48771) !important;
}

/* Style for images that failed to load (file not found) */
.image-not-found {
  /* Show subtle placeholder for missing images with search capability */
  display: contents;
  align-items: center;
  gap: 6px;
  min-width: 60px;
  min-height: 20px;
  padding: 4px 8px;
  background-color: var(--vscode-inputValidation-warningBackground, rgba(255, 200, 0, 0.1));
  border: 1px dashed var(--vscode-inputValidation-warningBorder, #cca700);
  border-radius: 4px;
  font-size: 10px;
  color: var(--vscode-descriptionForeground, #888);
  cursor: pointer;
  max-width: 100%;
}

.image-not-found:hover {
  background-color: var(--vscode-inputValidation-warningBackground, rgba(255, 200, 0, 0.2));
  border-color: var(--vscode-focusBorder, #007acc);
}

/* Not found containers with burger menu */
.image-not-found-container,
.video-not-found-container {
  position: relative;
  display: inline-flex;
  align-items: center;
}

/* Burger menu button inside the image-not-found box - always visible */
.image-not-found .image-menu-btn,
.video-not-found .video-menu-btn {
  position: static !important;
  width: 18px !important;
  height: 18px !important;
  margin-left: 6px;
  background: rgba(0, 0, 0, 0.4) !important;
  border: none !important;
  border-radius: 3px !important;
  color: white !important;
  font-size: 11px !important;
  cursor: pointer;
  opacity: 1 !important;
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
}

.image-not-found .image-menu-btn:hover,
.video-not-found .video-menu-btn:hover {
  background: rgba(0, 0, 0, 0.7) !important;
}

.image-not-found-menu,
.video-not-found-menu {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  min-width: 180px;
  background: var(--vscode-menu-background, #252526);
  border: 1px solid var(--vscode-menu-border, #454545);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  padding: 4px 0;
  pointer-events: auto;
}

.image-not-found-menu.visible,
.video-not-found-menu.visible {
  display: block;
}

.image-not-found-menu .image-path-menu-item {
  pointer-events: auto;
}

.image-not-found-menu .image-path-menu-item:not(.disabled):not(:disabled) {
  cursor: pointer;
}

/* ============================================================================
   VIDEO NOT FOUND STYLES
   ============================================================================ */

/* Video path overlay container */
.video-path-overlay-container {
  position: relative;
  display: inline-block;
}

/* Video menu button - styles inherited from unified overlay button styles above */

/* Video not found placeholder */
.video-not-found {
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  background-color: var(--vscode-inputValidation-warningBackground, rgba(255, 204, 0, 0.2));
  border: 1px solid var(--vscode-inputValidation-warningBorder, #cca700);
  border-radius: 4px;
  color: var(--vscode-inputValidation-warningForeground, #cca700);
  font-size: 0.9em;
  max-width: 100%;
  overflow: hidden;
}

.video-not-found-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 200px;
}

/* Tasks container must allow the children to be overflow visible! */
.tasks-container {
  overflow: visible;
}

/* Task items */
.task-item {
  /* background-color: var(--task-background); */
  border-radius: 4px;
	gap: var(--whitespace-div4);
  margin-bottom: var(--whitespace-div2);
  min-height: var(--task-height);
  transition: all 0.2s ease;
  position: relative;
  overflow: visible;
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

/* CRITICAL FIX: Prevent task content from being draggable (only drag handle should be draggable) */
/* This prevents text selections from being dragged and creating unintended tasks */
.task-item * {
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
}

/* Allow only the drag handle to be draggable */
.task-drag-handle {
  -webkit-user-drag: element !important;
  -khtml-user-drag: element !important;
  -moz-user-drag: element !important;
  -o-user-drag: element !important;
  user-drag: element !important;
}

.task-drag-handle:active {
  cursor: grabbing;
}

/* CRITICAL FIX: Prevent column content from being draggable */
.kanban-full-height-column * {
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
}

/* Allow only the column drag handle to be draggable */
.column-drag-handle {
  background: var(--button-alternative-background);
  color: var(--button-alternative-foreground);
  border: var(--button-alternative-border);
  -webkit-user-drag: element !important;
  cursor: grab;
  border-radius: 3px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.column-drag-handle:hover {
  background: var(--button-alternative-background-hover);
  color: var(--button-alternative-foreground-hover);
}

.column-drag-handle:active {
  cursor: grabbing;
}

/* Apply min and max height when task height is limited */
.task-height-limited .task-item {
  min-height: var(--task-height) !important;
  max-height: var(--task-height) !important;
}

.task-item:last-child {
  margin-bottom: 0;
}

.task-item:hover {
  border: none;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.task-item.collapsed .task-description-container {
  display: none;
}

.task-header {
  position: relative; /* Needed for absolutely positioned badge containers */
  display: flex;
  align-items: center;
  gap: var(--whitespace-div4);
	padding-left: 8px;
	padding-right: 8px;
  margin-left: 0;
  order: 1;
  flex-shrink: 0;
}

/* Align task header controls with title baseline */
.task-header > .task-drag-handle,
.task-header > .task-collapse-toggle,
.task-header > .task-menu-container {
  margin-top: 2px; /* Align with title text baseline */
}

/* Drag handles */
.drag-handle,
.task-drag-handle {
  background: var(--button-alternative-background);
  color: var(--button-alternative-foreground);
  border: var(--button-alternative-border);
  cursor: grab;
  transition: all 0.2s;
  user-select: none;
  flex-shrink: 0;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  font-size: 14px;
}

.drag-handle:hover,
.task-drag-handle:hover {
  background: var(--button-alternative-background-hover);
  color: var(--button-alternative-foreground-hover);
}

.drag-handle:active,
.task-drag-handle:active {
  cursor: grabbing;
}

.task-drag-handle {
  line-height: 1;
  margin-top: 2px;
}

/* Collapse toggles */
.collapse-toggle,
.task-collapse-toggle {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  font-size: 10px;
  transition: all 0.2s;
  user-select: none;
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  transform: rotate(90deg);
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.collapse-toggle:hover,
.task-collapse-toggle:hover {
  background: var(--button-secondary-background-hover);
}

.collapse-toggle.rotated,
.task-collapse-toggle.rotated {
  transform: rotate(0deg);
}

.task-collapse-toggle {
  margin-top: 2px;
}

/* Task title container */
.task-title-container {
  flex: auto;
  /* width: -webkit-fill-available; */
  /* max-width: var(--task-title-width); */
  cursor: pointer;
  overflow: hidden;
}

.task-title-container:hover {
  background-color: var(--vscode-list-hoverBackground);
}

.task-title-display {
  /* font-size: 14px; */
  /* line-height: 1.4; */
  word-break: break-word;
  overflow-wrap: break-word;
  padding: 2px 0;
  border-radius: 3px;
  cursor: pointer;
  min-height: 20px;
}

.task-title-display:hover {
  background-color: var(--vscode-list-hoverBackground);
}

/* Task description */
.task-description-container {
  /* margin-top: 4px; */
  order: 3;
  flex: 1 1 auto;
}

.image-not-found-text {
  font-size: 1.0em;
}

.task-description-display {
  border-radius: 3px;
  cursor: pointer;
  padding-left: 8px;
  padding-right: 8px;
  min-height: 20px;
  overflow-wrap: break-word;
  max-height: inherit;
}

/* Task section styling for content between HRs */
.task-section {
  max-height: inherit;
  max-width: inherit;
  display: flex;
  flex-direction: column;
  outline: none;
}

/* Focus styling for task sections */
.task-section:focus {
  outline: 3px solid var(--section-focus-color);
  outline-offset: -3px;
}

/* Apply max-height to sections when section-height-limited class is active */
body.section-height-limited .task-section {
  max-height: var(--section-max-height, auto);
  min-height: var(--section-min-height, auto);
  max-width: -webkit-fill-available;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

/* Apply task-section specific min/max height when task-section-height-limited class is active */
body.task-section-height-limited .task-section {
  min-height: var(--task-section-min-height, auto);
  max-height: var(--task-section-max-height, auto);
  max-width: -webkit-fill-available;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

/* Ensure images and figures within sections are constrained by section height */
body.section-height-limited .task-section img {
  max-height: var(--section-max-height, auto);
  object-fit: contain;
  flex-shrink: 1;
}

/* Figures should NOT have object-fit (it's for replaced elements like img/video only) */
body.section-height-limited .task-section figure {
  max-height: var(--section-max-height, auto);
  flex-shrink: 1;
  /* NO object-fit - causes rendering issues on container elements */
}

/* Constrain figure content */
body.section-height-limited .task-section figure img {
  /* max-height: calc(var(--section-max-height, auto) - 2em); */
  /* max-height: 100%;
  max-width: 100%; */
  width: 100%;
  height: 100%;
}

/* CSS-based placeholders for empty display elements */
.column-title-text:empty::before {
  content: "Add title...";
  color: var(--vscode-descriptionForeground);
  font-style: italic;
  opacity: 0.7;
}

.task-title-display:empty::before {
  content: "Add title...";
  color: var(--vscode-descriptionForeground);
  font-style: italic;
  opacity: 0.7;
}

.task-description-display:empty::before,
.task-description-display:has(> .task-section:only-child:empty)::before {
  content: "Add description...";
  color: var(--vscode-descriptionForeground);
  font-size: 13px;
  font-style: italic;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 3px;
}

/* Broken task include - show disabled message instead of "Add description" */
.task-item.include-error .task-description-display:empty::before,
.task-item.include-error .task-description-display:has(> .task-section:only-child:empty)::before {
  content: "Description unavailable for broken include";
  cursor: not-allowed;
  opacity: 0.5;
}

/* Broken column include - placeholder message */
.broken-include-placeholder {
  color: var(--vscode-descriptionForeground);
  font-style: italic;
  opacity: 0.5;
  padding: 12px 8px;
  text-align: center;
  cursor: not-allowed;
}

/* Edit fields */
.column-title-edit,
.task-title-edit,
.task-description-edit {
  border: 1px solid var(--vscode-focusBorder);
  border-radius: 3px;
  background: var(--vscode-input-background);
  color: var(--vscode-foreground);
  font-family: inherit;
  resize: none;
  overflow: hidden;
}

.column-title-edit:focus,
.task-title-edit:focus,
.task-description-edit:focus {
  outline: none;
  border-color: var(--vscode-focusBorder);
}

.column-title-edit {
  font-size: 14px;
  flex: 1;
  padding: 2px 4px;
  min-height: 24px;
  width: 100%;
  min-width: 0;
}

.task-title-edit {
  font-size: 14px;
  line-height: 1.4;
  word-break: break-word;
  padding: 2px 4px;
  resize: none;
  min-height: 20px;
  width: 100%;
  /* width: var(--task-title-width); */
}

.task-description-edit {
  font-size: 13px;
  line-height: 1.5;
  padding: 4px;
  width: 100%;
  min-height: 3em;
}

/* the add task button is styled horizontally and is listed after the last card */
.add-task-btn {
  width: calc(100%);
  background: var(--button-secondary-background);
  color: var(--button-secondary-foreground);
  border: 1px dashed var(--vscode-panel-border);
  border-radius: 6px;
  padding: 8px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-task-btn:hover {
  background: var(--button-secondary-background-hover);
  border-color: var(--vscode-focusBorder);
}

/* Hide add-task button when column has tasks */
.tasks-container:has(.task-item) .add-task-btn {
  display: none;
}

/* the column button should be styled vertically and is displayed at the end of each row after the last column */
.add-column-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: 1px dashed var(--vscode-panel-border);
  border-radius: 6px;
  padding: 16px 8px;  /* Adjust padding for vertical text */
  font-size: 14px;
	margin-top: var(--whitespace-div2);
  cursor: pointer;
  transition: background-color 0.2s;
  align-self: flex-start;
  flex-shrink: 0;
  transform: rotate(180deg);
  writing-mode: vertical-rl;  /* Always vertical */
  min-height: 100px;  /* Ensure minimum height for vertical text */
}

.add-column-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
  border-color: var(--vscode-focusBorder);
}

.kanban-board.multi-row .add-column-btn.multi-row-add-btn {
  transform: rotate(180deg);
  writing-mode: vertical-rl;
  padding: 12px 8px;
}

/* Initialize board container */
.initialize-container {
  text-align: center;
  padding: 40px;
  color: var(--vscode-descriptionForeground);
}

.initialize-container .initialize-message {
  margin-bottom: 20px;
  font-size: 16px;
  text-align: left;
}

.initialise-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 6px;
  padding: 16px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
  align-self: flex-start;
  display: block;
}

/* Count badge */
.task-count {
  border: 1px solid var(--vscode-badge-background);
  color: var(--vscode-badge-foreground);
  border-radius: 4px;
  /* padding: 3px 6px 3px 6px; */
  font-size: 12px;
  font-weight: 500;
  display: flex;
  gap: 4px;
  padding: 1px 1px 1px 4px;
  align-items: center;
}

.kanban-full-height-column.collapsed-vertical .task-count,
.kanban-full-height-column.collapsed-horizontal .task-count {
	display: none;
}

/* Fix task count color in light mode */
body.vscode-light .task-count,
body.vscode-high-contrast-light .task-count {
  color: var(--vscode-foreground);
}

/* Fold buttons */
.fold-all-btn,
.global-fold-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  border-radius: 3px;
  transition: all 0.2s;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.fold-all-btn {
  padding: 2px 4px;
  font-size: 10px;
  line-height: 1;
  min-width: 16px;
  height: 16px;
  width: 16px;
}

/* Pin button (sticky toggle) */
.pin-btn {
  padding: 2px 4px;
  font-size: 8px;
  line-height: 1;
  height: 16px;
  width: 16px;
  background: transparent; /* Keep commented */
  color: var(--button-foreground);
  /* border: var(--button-border); */
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 2px;
  position: relative;

  border-radius: 2px;

  outline: 2px solid transparent;
  outline-offset: 0px;
  border: none;
}

.pin-btn.global-override {
  outline: 2px dashed var(--vscode-errorBorder, #cc007aff);
  outline-offset: -2px;
  border: none;
}

/* do the background using :before */
.pin-btn:before {
  content: ''; /* REQUIRED for :before to show */
  position: absolute; /* REQUIRED */
  inset: 0; /* Fill the button */
  z-index: -1;
  border-radius: 3px;
}

.pin-btn:hover:before {
  background: var(--button-background-hover);
  opacity: 1;
}

.pin-btn.pinned:before {
  background: var(--button-background);
  opacity: 1;
}

.pin-btn.unpinned:before {
  background: var(--button-background);
  opacity: 0.4;
}

.fold-all-btn:hover,
.global-fold-btn:hover {
  background: var(--button-secondary-background-hover);
}

.global-fold-btn {
  padding: 4px 8px;
  font-size: 12px;
  line-height: 1;
  gap: 4px;
  flex-shrink: 0;
  margin-left: 8px;
}

.fold-icon,
.global-fold-icon {
  display: block;
  line-height: 1;
  transform-origin: center;
  transition: transform 0.2s;
}

.global-fold-icon {
  font-size: 10px;
  padding: 2px;
}

.fold-all-btn.fold-collapsed .fold-icon,
.global-fold-btn.fold-collapsed .global-fold-icon {
  transform: rotate(0deg);
}

.fold-all-btn.fold-mixed .fold-icon,
.global-fold-btn.fold-mixed .global-fold-icon {
  color: var(--vscode-charts-orange);
  opacity: 0.8;
}

/* Menus */
.donut-menu,
.file-bar-menu {
  position: relative;
  z-index: 100;
}

.file-bar-menu {
  z-index: 200;
}

/* All active menus need maximum z-index to appear above all interface elements */
.donut-menu.active,
.file-bar-menu.active {
  z-index: 1000;
  isolation: isolate;
}

.donut-menu-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  padding: 2px 2px;
  line-height: 1;
  transition: all 0.2s;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  font-size: 14px;
}

.donut-menu-btn:hover {
  background: var(--button-secondary-background-hover);
}

.file-bar-menu-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  padding: 4px 8px;
  font-size: 16px;
  line-height: 1;
  transition: all 0.2s;
  border-radius: 3px;
}

.file-bar-menu-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

.donut-menu-dropdown,
.file-bar-menu-dropdown {
  display: none;
  position: fixed;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  z-index: 1000;
  /* Add hover border for easier targeting */
  padding: 3px;
}

.donut-menu-dropdown {
  min-width: 150px;
}

.file-bar-menu-dropdown {
  min-width: 180px;
}

/* Collapsed column dropdowns are handled by JavaScript positioning */

.donut-menu.active .donut-menu-dropdown,
.file-bar-menu.active .file-bar-menu-dropdown,
.donut-menu-dropdown.moved-to-body,
.file-bar-menu-dropdown.moved-to-body {
  display: block;
}

.donut-menu-item,
.file-bar-menu-item {
  padding: 4px 8px;
  cursor: pointer;
  font-size: 13px;
  color: var(--vscode-dropdown-foreground);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  position: relative;
  transition: background-color 0.2s;
  white-space: nowrap;
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.file-bar-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.file-bar-menu-item .menu-icon {
  flex-shrink: 0;
  width: 16px;
  text-align: center;
}

button.donut-menu-item,
button.file-bar-menu-item {
  width: 100%;
  text-align: left;
}

.donut-menu-item:hover,
.file-bar-menu-item:hover {
  background-color: var(--vscode-list-hoverBackground);
}

.file-bar-menu-item.selected {
  background-color: var(--vscode-list-activeSelectionBackground);
  color: var(--vscode-list-activeSelectionForeground);
  font-weight: 500;
}

.file-bar-menu-item .menu-checkmark {
  color: var(--vscode-list-activeSelectionForeground);
  font-weight: bold;
  margin-left: auto;
  flex-shrink: 0;
}

.donut-menu-item.has-submenu,
.file-bar-menu-item.has-submenu {
  padding-right: 24px;
}

.donut-menu-item.has-submenu::after {
  content: '';
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  opacity: 0.6;
}

.kanban-full-height-column .donut-menu-item.has-submenu::after {
  content: '';
}

.file-bar-menu-item.has-submenu::after {
  content: '';
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  opacity: 0.6;
}

.donut-menu-item.has-submenu::before,
.kanban-full-height-column .donut-menu-item.has-submenu::before,
.file-bar-menu-item.has-submenu::before {
  content: '';
  position: absolute;
  top: 0;
  width: 10px;
  height: 100%;
  z-index: 50;
}

.donut-menu-item.has-submenu::before {
  left: 100%;
}

.kanban-full-height-column .donut-menu-item.has-submenu::before,
.file-bar-menu-item.has-submenu::before {
  right: 100%;
}

.donut-menu-submenu,
.file-bar-menu-submenu {
  display: none;
  position: fixed;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  min-width: 180px;
  max-width: 280px;
	width: auto;
  max-height: 80vh;
  z-index: 1000;
  pointer-events: all !important;
  overflow-x: hidden;
  overflow-y: auto;
  word-wrap: break-word;
}

/* Tag grid submenus need constrained width for wrapping */
.donut-menu-submenu:has(.donut-menu-tags-grid) {
  min-width: 250px;
  max-width: 350px;
  width: 320px;
}

/* Submenus are positioned by JavaScript */

.file-bar-menu-submenu {
  min-width: 140px;
}

/* Ensure all submenu content respects container bounds */
.donut-menu-submenu *,
.file-bar-menu-submenu * {
  max-width: 100%;
}

/* Tag grids in submenus use flex layout */
.donut-menu-submenu .donut-menu-tags-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  padding: 2px;
  width: 100%;
}

/* Submenu items prevent overflow */
.donut-menu-submenu .donut-menu-item,
.file-bar-menu-submenu .file-bar-menu-item {
  width: calc(100% - 2px);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Menu icons don't shrink */
.donut-menu-submenu .menu-icon,
.file-bar-menu-submenu .menu-icon {
  flex-shrink: 0;
}

/* Tag chips in submenus */
.donut-menu-submenu .donut-menu-tag-chip {
  display: flex;
  align-items: center;
  /* min-width: 60px; */
  /* max-width: calc(50% - 2px); */
  overflow: hidden;
  gap: 3px;
  margin: 2px;
  padding: 2px 6px;
  pointer-events: all !important;
  cursor: pointer;
  border-radius: 3px;
  transition: background-color 0.2s ease;
  position: relative;
  z-index: 100001;
}

/* Tag chip text truncates */
.donut-menu-submenu .donut-menu-tag-chip .tag-chip-name {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 11px;
}

/* Tag chip check icon fixed size */
.donut-menu-submenu .donut-menu-tag-chip .tag-chip-check {
  flex: none;
  width: 16px;
  height: 16px;
}

.donut-menu-submenu button.donut-menu-item,
.file-bar-menu-submenu button.file-bar-menu-item {
  display: block;
  width: 100%;
  text-align: left;
  border: none;
  background: none;
  padding: 8px 12px;
  margin: 0;
  white-space: nowrap;
  cursor: pointer !important;
  font-size: 13px;
  color: var(--vscode-dropdown-foreground);
  transition: background-color 0.2s ease;
  pointer-events: all !important;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  position: relative;
  z-index: 100002;
  /* Ensure buttons are always interactive */
  touch-action: manipulation;
  user-select: none;
}

.donut-menu-submenu button.donut-menu-item:hover,
.file-bar-menu-submenu button.file-bar-menu-item:hover,
.donut-menu-submenu .donut-menu-tag-chip:hover {
  background-color: var(--vscode-list-hoverBackground);
}

.donut-menu-divider,
.file-bar-menu-divider {
  height: 1px;
  background: var(--vscode-panel-border);
  margin: 4px 0;
}

.donut-menu-item.danger {
  color: var(--vscode-errorForeground);
}

/* Span width controls in column menu */
.donut-menu-item.span-width-control {
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* padding: 8px 12px; */
}

.span-width-label {
  font-size: 13px;
  color: var(--vscode-menu-foreground);
}

.span-width-controls {
  display: flex;
  align-items: center;
  gap: 6px;
}

.span-width-btn {
  background: var(--button-background);
  border: var(--button-border);
  color: var(--button-foreground);
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  border-radius: 3px;
  transition: background-color 0.1s ease;
}

.span-width-btn:hover {
  background: var(--button-background-hover);
}

.span-width-btn:active {
  background: var(--button-background);
  transform: scale(0.95);
}

.span-width-value {
  font-size: 13px;
  color: var(--vscode-menu-foreground);
  min-width: 12px;
  text-align: center;
  font-weight: 500;
}

.donut-menu-item.stack-control {
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* padding: 8px 12px; */
}

.stack-label {
  font-size: 13px;
  color: var(--vscode-menu-foreground);
}

.stack-toggle-btn {
  background: var(--button-background);
  border: var(--button-border);
  color: var(--button-foreground);
  padding: 4px 8px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  cursor: pointer;
  border-radius: 3px;
  min-width: 32px;
  transition: all 0.1s ease;
}

.stack-toggle-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

.stack-toggle-btn.active {
  background: var(--button-background-active);
  color: var(--button-foreground-active);
  border: var(--button-border-active);
}

.kanban-column-stack {
	/* transform-style: preserve-3d; */
  display: grid;
  grid-template: 1fr / 1fr;
  position: relative;
	height: 100%;
}

/* All columns in grid */
.kanban-column-stack .kanban-full-height-column {
  grid-row: 1;
  grid-column: 1;
  align-self: start;
}

/* Only expanded columns overlay with pointer-events */
.kanban-column-stack .kanban-full-height-column {
  pointer-events: none;
}

/* Re-enable pointer events on interactive child elements */
.kanban-column-stack .kanban-full-height-column .column-header,
.kanban-column-stack .kanban-full-height-column .column-title,
.kanban-column-stack .kanban-full-height-column .column-footer,
.kanban-column-stack .kanban-full-height-column .column-inner {
  pointer-events: auto;
}

/* Sticky headers and titles at bottom with dynamic offsets (set by JavaScript inline styles) */
.kanban-column-stack .kanban-full-height-column .column-margin,
.kanban-column-stack .kanban-full-height-column .column-header,
.kanban-column-stack .kanban-full-height-column .column-title,
.kanban-column-stack .kanban-full-height-column .column-footer {
  position: sticky;
  background: var(--column-background);
  z-index: 100;
}

.kanban-column-stack .kanban-full-height-column .column-inner {
  transform: translateZ(-0.08px);
}

.kanban-column-stack .kanban-full-height-column .column-margin {
  height: var(--whitespace-div2);
  transform: translateZ(-0.11px);
}

.kanban-column-stack .kanban-full-height-column .column-header {
  transform: translateZ(-0.133px);
}

.kanban-column-stack .kanban-full-height-column .column-footer {
  transform: translateZ(-0.133px);
}

.kanban-column-stack .kanban-full-height-column .column-title {
	transform: translateZ(0.0px);
}

/* Stack sticky mode: titleonly - only title is sticky (only for columns with #sticky tag) */
body.sticky-stack-mode-titleonly .kanban-column-stack .kanban-full-height-column[data-column-sticky="true"] .column-header {
  position: relative !important;
}

body.sticky-stack-mode-titleonly .kanban-column-stack .kanban-full-height-column[data-column-sticky="true"] .column-footer {
  position: relative !important;
}

body.sticky-stack-mode-titleonly .kanban-column-stack .kanban-full-height-column[data-column-sticky="true"] .column-margin {
  position: relative !important;
}

/* Per-column sticky control: when data-column-sticky="false", nothing is sticky */
.kanban-column-stack .kanban-full-height-column[data-column-sticky="false"] .column-header {
  position: relative !important;
}

.kanban-column-stack .kanban-full-height-column[data-column-sticky="false"] .column-title {
  position: relative !important;
}

.kanban-column-stack .kanban-full-height-column[data-column-sticky="false"] .column-footer {
  position: relative !important;
}

.kanban-column-stack .kanban-full-height-column[data-column-sticky="false"] .column-margin {
  position: relative !important;
}

/* Base styling for collapsed columns */
.kanban-full-height-column.collapsed-vertical,
.kanban-full-height-column.collapsed-horizontal {
  overflow: visible;
  /* width: min-content; */
  position: sticky;
  top: 0;
  align-self: flex-start;
  /* z-index: 5; */
}

.kanban-column-stack.all-vertical-folded .kanban-full-height-column.collapsed-vertical {
	width: min-content;
}

/* Collapsed column inner content */
.kanban-full-height-column.collapsed-vertical .column-inner,
.kanban-full-height-column.collapsed-horizontal .column-inner {
  overflow: visible;
  flex: none;
  display: flex;
  flex-direction: column;
  height: auto;
  min-height: auto;
}

/* Vertical fold: rotate text vertically */
.kanban-full-height-column.collapsed-vertical .column-title-text {
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  width: 100%;
  padding: 5px 0;
  margin: 0;
  gap: 4px;
  white-space: nowrap;
}

/* Horizontal fold: keep text horizontal but narrow */
.kanban-full-height-column.collapsed-horizontal .column-title-text {
  display: flex;
  align-items: center;
  flex: 1;
  width: 100%;
  margin: 0;
  gap: 4px;
}

/* Hide column-inner when collapsed in stacks */
.kanban-column-stack .kanban-full-height-column.collapsed-vertical .column-inner,
.kanban-column-stack .kanban-full-height-column.collapsed-horizontal .column-inner {
  display: none !important;
}

/* Column drop zones for horizontal positioning */
.column-drop-zone-stack {
  display: flex;
  flex-direction: column;
  height: 100%;
  flex-shrink: 0;
}

.column-drop-zone {
  min-width: var(--whitespace);
  height: 100%;
  flex-shrink: 0;
  background: transparent;
  transition: min-width 0.15s ease 0.1s, background 0.2s ease, width 0.15s ease 0.1s;
}

/* BEGIN style with only lines not with borders */

.column-drop-zone-stack:not(:first-child) .column-drop-zone {
  background: linear-gradient(var(--vscode-panel-border), var(--vscode-panel-border)) no-repeat center / 2px 100%;
}

.kanban-column-stack .kanban-full-height-column:not(:first-child) .column-margin {
  background: linear-gradient(var(--vscode-panel-border), var(--vscode-panel-border)) no-repeat center / 100% 2px;
}

.stack-bottom-drop-zone {
  background: linear-gradient(var(--vscode-panel-border), var(--vscode-panel-border)) no-repeat 0 4px / 100% 2px;
}

.task-item:not(:first-child)::after {
    content: '';
    position: absolute;
    top: calc(0px - var(--whitespace-div4));
    left: 0;
    width: 100%;
    height: 1px;
    background: var(--vscode-panel-border);
}

/* END style with only lines not with borders */

/* Visual feedback for drop zones - no scaling */
.column-drop-zone.drag-over,
.column-drop-zone-stack .column-drop-zone.drag-over,
.stack-bottom-drop-zone.drag-over {
  background: var(--vscode-editor-selectionBackground) !important;
  border: 2px dashed var(--vscode-editor-selectionForeground);
  border-radius: 4px;
}

/* Horizontal drop zones between columns in stack - background only, no border */
.column-margin.drag-over,
.kanban-column-stack .kanban-full-height-column .column-margin.drag-over {
  background: var(--vscode-editor-selectionBackground) !important;
}

/* Visual feedback when dropping task at end of column (hovering over column-title) */
.column-title.task-drop-target {
  background: var(--vscode-editor-selectionBackground);
  outline: 2px dashed var(--vscode-focusBorder);
  outline-offset: -2px;
  border-radius: 4px;
}

/* Visual separation - add padding to content of stacked columns
.kanban-column-stack .kanban-full-height-column:nth-child(n+2) .column-inner {
  padding-top: var(--whitespace);
} */

/* When all columns in a stack are vertically folded (.collapsed), display them horizontally */
.kanban-column-stack.all-vertical-folded {
  display: flex !important;
  flex-direction: row !important;
  align-items: flex-start;
  gap: var(--whitespace);
  min-height: auto;
}

.kanban-column-stack.all-vertical-folded .kanban-full-height-column {
  min-height: auto;
}

/* Vertically folded columns use sticky positioning based on sticky stack mode setting */
/* Removed position: relative override to allow JavaScript sticky positioning control */

.task-menu-container {
  z-index: 9;
	margin-left: auto; /* align to right */
}

/* Tags menu - base styles (overridden for submenus) */
.donut-menu-tags-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 8px;
  background: var(--vscode-menu-background);
  border: 1px solid var(--vscode-menu-border);
  border-radius: 4px;
  max-width: 300px;
  width: 100%;
}

.donut-menu-tag-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border: 2px solid;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--vscode-menu-foreground);
  white-space: nowrap;
  flex: 0 0 auto;
  max-width: none;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  z-index: 999999 !important;
  position: relative !important;
}

.donut-menu-tag-chip:hover {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  transform: translateY(-1px);
}

.donut-menu-tag-chip.active {
  /* font-weight: bold; */
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.donut-menu-tag-chip .tag-chip-check {
  font-size: 10px;
  font-weight: bold;
  min-width: 10px;
  display: inline-block;
}

.donut-menu-tag-chip .tag-chip-name {
  text-transform: capitalize;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: none;
  flex: 1;
  min-width: 0;
}

.donut-menu-item.has-submenu:hover .donut-menu-tags-grid {
  display: flex;
}

/* Tag grid submenus are positioned by JavaScript like all other submenus */

/* Removed conflicting max-width rules - using flexible container instead */

.donut-menu-dropdown {
  overflow: visible;
}

/* Tag chip border colors are set dynamically via inline styles based on tag configuration */

/* Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: var(--vscode-editor-background);
  margin: 5vh auto;
  padding: 0px 8px 8px 8px;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 8px;
  width: min-content;
  max-width: 80%;
  height: min-content;
  max-height: 80%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
  padding-bottom: 3px;
  border-bottom: 1px solid var(--vscode-panel-border);
  flex-shrink: 0;
  min-height: 24px;
}

.modal-header-actions {
  display: flex;
  gap: 4px;
  align-items: center;
}

.btn-export-header {
  padding: 3px 8px;
  font-size: 12px;
  line-height: 1.2;
  border: var(--button-border);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

.btn-export-header:hover {
  box-shadow: 0 0 0 2px var(--vscode-focusBorder);
}

.modal-title {
  font-size: 16px;
  font-weight: 500;
  line-height: 1.2;
	margin: 0px;
}

.close-btn {
  background: var(--button-secondary-background);
  border: var(--button-border);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
  border-radius: 4px;
  font-size: 16px;
  line-height: 1;
  cursor: pointer;
  color: var(--button-secondary-foreground);
  padding: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
	margin: 4px 0px 0px 6px;
}

.close-btn:hover {
  background: var(--button-secondary-background-hover);
  box-shadow: 0 0 0 2px var(--vscode-focusBorder);
}

.form-input {
  /* width: 100%; */
  padding: 4px;
  border: 1px solid var(--vscode-input-border);
  border-radius: 4px;
  background-color: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  font-family: inherit;
  font-size: 14px;
}

.form-input:focus {
  outline: none;
  border-color: var(--vscode-focusBorder);
}

.modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--vscode-panel-border);
  flex-shrink: 0;
}

.btn {
  padding: 2px 8px;
	margin: 6px 0px 2px 0px;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btn-primary {
  background: var(--button-background);
  color: var(--button-foreground);
}

.btn-primary:hover {
  background: var(--button-background-hover);
}

.btn-secondary {
  background: var(--button-secondary-background);
  color: var(--button-secondary-foreground);
  border: var(--button-border);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

.btn-secondary:hover {
  background: var(--button-secondary-background-hover);
  box-shadow: 0 0 0 2px var(--vscode-focusBorder);
}

.modal-body {
  flex: 1;
  overflow-y: auto;
  padding-right: 4px;
}

.export-field {
  margin-bottom: 12px;
}

.export-field-compact {
  margin-top: 8px;
}

.export-field-row {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
}

.export-field-half {
  flex: 1;
}

.export-field-third {
  flex: 1;
}

.export-field-half label,
.export-field-third label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  font-size: 13px;
}

.export-field label {
  display: block;
  font-weight: 500;
  margin-bottom: 6px;
  color: var(--vscode-foreground);
  font-size: 13px;
}

.export-folder-input {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.export-folder-input input {
  flex: 1;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
  min-height: 28px;
  height: auto;
}

.export-checkboxes {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 4px;
  margin-top: 6px;
}

.export-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-weight: normal;
}

.export-checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  margin: 0;
}

/* Marp Status Indicator */
.marp-status {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--vscode-editor-background);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
  font-size: 12px;
}

.status-label {
  font-weight: 500;
  color: var(--vscode-foreground);
}

.status-text {
  font-weight: 400;
}

.status-success {
  color: var(--vscode-testing-iconPassed, #73c991);
}

.status-warning {
  color: var(--vscode-editorWarning-foreground, #cca700);
}

.status-pending {
  color: var(--vscode-foreground);
  opacity: 0.7;
}

/* Export Visual Selector (Kanban-style layout) */
.export-tree-container {
  flex: 1;
  overflow-x: auto;
  overflow-y: auto;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
  padding: 6px;
  background-color: var(--vscode-editor-background);
  margin-top: 6px;
}

.export-selector-empty {
  text-align: center;
  padding: 20px;
  color: var(--vscode-descriptionForeground);
  font-style: italic;
}

.export-selector-main {
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: max-content;
}

/* Full Kanban option */
.export-selector-full {
  padding: 2px 10px;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
  background-color: var(--vscode-input-background);
  cursor: pointer;
  font-weight: 600;
  text-align: center;
  transition: border-color 0.15s ease, background-color 0.15s ease;
}

.export-selector-full:hover {
  border-color: var(--vscode-list-hoverBackground);
  background-color: var(--vscode-list-hoverBackground);
}

.export-selector-full.selected {
  border-color: var(--vscode-focusBorder);
  background-color: var(--vscode-list-activeSelectionBackground);
  color: var(--vscode-list-activeSelectionForeground);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

/* Row container */
.export-selector-row {
  display: flex;
  gap: 4px;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
  padding: 2px;
  background-color: var(--vscode-input-background);
  transition: border-color 0.15s ease, background-color 0.15s ease;
}

.export-selector-row:hover {
  border-color: var(--vscode-list-hoverBackground);
  background-color: var(--vscode-list-hoverBackground);
}

.export-selector-row.selected {
  border-color: var(--vscode-focusBorder);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
  background-color: var(--vscode-list-activeSelectionBackground);
}

.export-selector-row-label {
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  padding: 2px 4px;
  font-weight: 500;
  cursor: pointer;
  border-radius: 2px;
  background-color: var(--button-secondary-background);
  color: var(--button-secondary-foreground);
  font-size: 0.85em;
  white-space: nowrap;
  flex-shrink: 0;
  text-align: center;
}

.export-selector-row-label:hover {
  background-color: var(--button-secondary-background-hover);
}

/* Columns container (horizontal) */
.export-selector-columns-container {
  display: flex;
  gap: 4px;
  flex-wrap: nowrap;
  align-items: flex-start;
  flex: 1;
}

/* Stack (vertical container) */
.export-selector-stack {
  display: flex;
  flex-direction: column;
  gap: 2px;
  border: 1px dashed var(--vscode-panel-border);
  border-radius: 3px;
  padding: 2px;
  background-color: rgba(128, 128, 128, 0.05);
  cursor: pointer;
  transition: border-color 0.15s ease, background-color 0.15s ease;
  min-width: 120px;
  max-width: 250px;
  width: fit-content;
  flex-shrink: 0;
}

.export-selector-stack:hover {
  border-color: var(--vscode-list-hoverBackground);
  background-color: var(--vscode-list-hoverBackground);
}

.export-selector-stack.selected {
  border-color: var(--vscode-focusBorder);
  border-style: solid;
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
  background-color: var(--vscode-list-activeSelectionBackground);
}

.export-selector-stack-label {
  font-size: 0.75em;
  color: var(--vscode-descriptionForeground);
  font-style: italic;
  padding: 2px 4px;
  text-align: center;
}

/* Regular column (not stacked) */
.export-selector-column {
  padding: 2px 8px;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 3px;
  background-color: var(--button-background);
  color: var(--button-foreground);
  cursor: pointer;
  font-size: 0.9em;
  white-space: normal;
  word-wrap: break-word;
  transition: border-color 0.15s ease, background-color 0.15s ease;
  flex-shrink: 0;
  min-width: 80px;
  max-width: 250px;
}

.export-selector-column:hover {
  border-color: var(--vscode-list-hoverBackground);
  background-color: var(--vscode-list-hoverBackground);
  color: var(--vscode-list-hoverForeground);
}

.export-selector-column.selected {
  border-color: var(--vscode-focusBorder);
  background-color: var(--vscode-list-activeSelectionBackground);
  color: var(--vscode-list-activeSelectionForeground);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

/* Stacked column (horizontal line in stack) */
.export-selector-stacked-column {
  padding: 2px 6px;
  border: 1px solid var(--vscode-panel-border);
  border-radius: 2px;
  background-color: var(--button-background);
  color: var(--button-foreground);
  cursor: pointer;
  font-size: 0.85em;
  white-space: normal;
  word-wrap: break-word;
  transition: border-color 0.15s ease, background-color 0.15s ease;
}

.export-selector-stacked-column:hover {
  border-color: var(--vscode-list-hoverBackground);
  background-color: var(--vscode-list-hoverBackground);
  color: var(--vscode-list-hoverForeground);
}

.export-selector-stacked-column.selected {
  border-color: var(--vscode-focusBorder);
  background-color: var(--vscode-list-activeSelectionBackground);
  color: var(--vscode-list-activeSelectionForeground);
  box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

/* Link Handling Options */
.link-handling-options {
  margin-left: 24px;
  margin-top: 12px;
  padding-left: 12px;
  border-left: 2px solid var(--vscode-panel-border);
}

.export-field-label {
  font-size: 12px;
  color: var(--vscode-descriptionForeground);
  margin-bottom: 8px;
  font-weight: 500;
}

#file-type-options {
  margin-bottom: 12px;
}

#file-size-option {
  margin-top: 8px;
}

/* Search Panel */
.search-panel {
  position: fixed;
  top: 60px;
  right: 20px;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 6px;
  padding: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  z-index: 2000;
  display: none;
  flex-direction: column;
  gap: 8px;
  min-width: 350px;
}

.search-panel-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.search-input {
  padding: 6px 10px;
  border: 1px solid var(--vscode-input-border);
  border-radius: 4px;
  background: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  font-size: 13px;
  outline: none;
  width: 100%;
}

.search-input:focus {
  border-color: var(--vscode-focusBorder);
}

.search-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Shared search button base styles */
.search-toggle-btn,
.search-nav-btn {
  padding: 4px 8px;
  border: var(--button-border);
  border-radius: 4px;
  background: var(--button-secondary-background);
  color: var(--button-secondary-foreground);
  cursor: pointer;
  transition: all 0.2s;
}

.search-toggle-btn:hover,
.search-nav-btn:hover {
  background: var(--button-secondary-background-hover);
}

/* Button-specific styles */
.search-toggle-btn {
  font-size: 11px;
  font-weight: bold;
  min-width: 28px;
}

.search-toggle-btn.active {
  background: var(--button-background);
  color: var(--button-foreground);
  border-color: var(--vscode-focusBorder);
}

.search-nav-btn {
  font-size: 14px;
}

.search-counter {
  flex: 1;
  text-align: center;
  font-size: 12px;
  color: var(--vscode-descriptionForeground);
  padding: 0 8px;
}

.search-close-btn {
  padding: 4px 8px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--vscode-foreground);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
  line-height: 1;
}

.search-close-btn:hover {
  background: var(--vscode-list-hoverBackground);
}

.search-match {
  background-color: var(--vscode-editor-findMatchBackground) !important;
  outline: 1px solid var(--vscode-editor-findMatchBorder);
  outline-offset: -1px;
}

.search-current-match {
  background-color: var(--vscode-editor-findMatchHighlightBackground) !important;
  outline: 2px solid var(--vscode-editor-findMatchHighlightBorder);
  outline-offset: -1px;
}

/* Multi-row layout */
.kanban-row {
  position: relative;
  transition: all 0.2s;
  display: flex;
  gap: 0px;
  align-items: flex-start;
	/* padding: var(--whitespace); */
  width: 100%;
	
	height: auto; 
	min-height: auto; 
	max-height: none; 
	overflow: visible;
}

.kanban-board.multi-row .kanban-row {
  position: relative;
	margin-bottom: var(--whitespace-div2);
	border-top: 0.5px dashed var(--vscode-panel-border);
}

.kanban-board.multi-row .kanban-row.drag-over {
  background-color: rgba(var(--vscode-focusBorder-rgb, 0, 122, 204), 0.1);
  outline: 2px dashed var(--vscode-focusBorder);
  outline-offset: -2px;
}

.kanban-board.multi-row .row-drop-zone-spacer {
  position: relative;
  z-index: 1;
}

.kanban-board.multi-row .kanban-row:last-child {
  border-bottom: none;
}

.kanban-board.multi-row .kanban-full-height-column {
  flex-shrink: 0;
}

.kanban-row-header {
  position: sticky;
  left: 0;
  background: var(--vscode-editor-background);
  padding: 8px;
  margin-right: var(--whitespace);
  min-width: 60px;
  text-align: center;
  border-radius: 4px;
  border: 1px solid var(--vscode-panel-border);
  font-size: 12px;
  color: var(--vscode-descriptionForeground);
  align-self: flex-start;
  z-index: 10;
  user-select: none;
}

.kanban-row.drag-over {
  background-color: rgba(var(--vscode-focusBorder), 0.1);
  border-radius: 8px;
  box-shadow: inset 0 0 0 2px var(--vscode-focusBorder);
  min-height: 200px;
}

.kanban-row.drag-over::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(var(--vscode-focusBorder), 0.05) 50%, 
    transparent 100%);
  pointer-events: none;
}

.kanban-row:has(.kanban-full-height-column.dragging) {
  opacity: 0.9;
}

.kanban-row:not(:has(.kanban-full-height-column)) {
  border: 2px dashed var(--vscode-panel-border);
  background-color: var(--vscode-list-hoverBackground);
  opacity: 0.5;
  padding: 20px;
  text-align: center;
  min-width: 100%;
  width: 100%;
}

.kanban-row:not(:has(.kanban-full-height-column))::after {
  content: "Drop columns here";
  color: var(--vscode-descriptionForeground);
  font-style: italic;
}

.kanban-row:has(.kanban-full-height-column.dragging):not(:has(.kanban-full-height-column:not(.dragging))) {
  border: none;
  background-color: transparent;
  justify-content: flex-start;
  align-items: flex-start;
  width: 100%;
}

.kanban-row:not(:has(.kanban-full-height-column:not(.dragging))) {
  border: 2px dashed var(--vscode-panel-border);
  background-color: var(--vscode-list-hoverBackground);
  justify-content: center;
  align-items: center;
}

.kanban-row:not(:has(.kanban-full-height-column:not(.dragging)))::after {
  content: "Drop columns here for Row " attr(data-row-number);
  color: var(--vscode-descriptionForeground);
  font-style: italic;
  font-size: 14px;
  opacity: 0.7;
}

.kanban-row.drag-over:not(:has(.kanban-full-height-column:not(.dragging)))::after {
  opacity: 1;
  font-weight: bold;
}

.kanban-row:has(.kanban-full-height-column)::after {
  display: none;
}

.kanban-row.drag-over::after {
  display: none;
}

.row-drop-zone-spacer {
  flex: 1 1 auto;
  min-height: 200px;
  pointer-events: all;
  position: relative;
}

.kanban-row.drag-over .row-drop-zone-spacer {
  min-width: 100px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(var(--vscode-focusBorder), 0.05) 50%, 
    transparent 100%);
}

.column-title-text:not(:has(.column-row-tag)) {
  min-height: inherit;
}

/* Row tags */

/* Drag and drop styles */
.task-item.dragging {
  opacity: 0.5;
  will-change: transform, opacity;
}

.kanban-full-height-column.drag-over .column-title,
.kanban-full-height-column.drag-over .column-content {
  position: relative;
  background-color: var(--vscode-list-hoverBackground);
}

.kanban-full-height-column.dragging {
  z-index: 1000 !important;
  pointer-events: none;
  will-change: transform, opacity;
}

/* Multi-row drag overlay fix: ensure proper stacking context for rows */
.kanban-board.multi-row .kanban-row {
  z-index: 1;
}

/* When dragging in multi-row mode, hide column content and set auto height */
.kanban-board.multi-row .kanban-row:has(.kanban-full-height-column.dragging) {
  z-index: 1001; /* Ensure dragging row appears above other rows */
}

/* Hide column content during drag in multi-row to reduce visual clutter */
.kanban-board.multi-row .kanban-full-height-column.dragging .column-content {
  max-height: 100px;
  overflow: hidden;
  opacity: 0.3;
}

/* Show stacked columns during drag operations */
.kanban-board.multi-row .kanban-full-height-column.dragging.column-span-2,
.kanban-board.multi-row .kanban-full-height-column.dragging.column-span-3,
.kanban-board.multi-row .kanban-full-height-column.dragging.column-span-4 {
  opacity: 1;
  pointer-events: auto;
}

.kanban-full-height-column.dragging .column-drag-handle {
  pointer-events: auto !important;
}

.drag-preview {
  opacity: 0.8;
}

.drag-transitioning {
  transition: transform 0.05s ease;
  will-change: transform;
  contain: layout;
}

.kanban-full-height-column.drag-over .column-title::before {
  content: '';
  position: absolute;
  left: -4px;
  top: 0;
  width: 4px;
  height: 100%;
  background-color: var(--vscode-focusBorder);
  z-index: 10;
  border-radius: 2px;
}

.kanban-full-height-column.drag-over .column-content::before {
  content: '';
  position: absolute;
  left: -4px;
  top: 0;
  width: 4px;
  height: 100%;
  background-color: var(--vscode-focusBorder);
  z-index: 10;
  border-radius: 2px;
}

#kanban-container.drag-highlight {
  background-color: rgba(0, 122, 204, 0.1);
  border: 2px dashed var(--vscode-focusBorder);
  border-radius: 8px;
  position: relative;
}

/* Visual feedback when dragging over column header/areas outside tasks */
.kanban-full-height-column.drag-over-append .column-title {
  background-color: var(--vscode-list-hoverBackground) !important;
  border-bottom: 3px solid var(--vscode-focusBorder);
  position: sticky;
}

.kanban-full-height-column.drag-over-append .column-title::after {
  content: 'Drop to add at end';
  position: absolute;
  bottom: -18px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--vscode-editor-background);
  color: var(--vscode-focusBorder);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 10px;
  white-space: nowrap;
  z-index: 1000;
  pointer-events: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.kanban-full-height-column.external-drag-over .column-title,
.kanban-full-height-column.external-drag-over .column-content {
  background-color: var(--vscode-list-hoverBackground);
  border: 2px dashed var(--vscode-focusBorder);
  border-radius: 8px 0px 8px 0px;
  position: relative;
}

/* UNIFIED: Single drop indicator for all drag types (tasks, external files, etc.) */
.drop-indicator {
  position: fixed;
  height: 3px;
  background-color: var(--vscode-focusBorder);
  border-radius: 2px;
  z-index: 10000; /* Above everything */
  pointer-events: none;
  display: none;
  box-shadow: 0 0 6px var(--vscode-focusBorder);
  will-change: transform, opacity, top, left;
}

.drop-indicator.active {
  display: block;
}

/* Dim the dragged task during drag (stays in original position) */
.task-item.drag-source {
  opacity: 0.3;
  filter: grayscale(50%);
  will-change: transform, opacity;
}

.kanban-full-height-column.drag-source {
  opacity: 0.3;
  filter: grayscale(50%);
  will-change: transform, opacity;
}

/* Markdown content */
.markdown-content {
  word-wrap: break-word;
  max-height: inherit;
  max-width: inherit;
  flex-shrink: 0;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  margin: 0.25em 0 0.25em 0;
}

.markdown-content p {
  margin: 0.5em 0;
}

.markdown-content ul,
.markdown-content ol {
  margin: 0.125em 0;
  padding-left: 1.5em;
}

.markdown-content code {
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-size: 0.9em;
}

.markdown-content pre {
  padding: 0.5em;
  border-radius: 3px;
  overflow-x: auto;
  margin: 0.25em 0;
}

.markdown-content a {
  color: var(--vscode-textLink-foreground);
  text-decoration: none;
}

.markdown-content a:hover {
  text-decoration: underline;
}

.task-title-container .markdown-content h1,
.task-title-container .markdown-content h2,
.task-title-container .markdown-content h3,
.task-title-container .markdown-content h4,
.task-title-container .markdown-content h5,
.task-title-container .markdown-content h6 {
  margin: 0;
  line-height: inherit;
}

.task-title-container .markdown-content p {
  margin: 0;
  display: inline;
}

h1,
h2,
h3,
h4,
h5,
h6 {
	font-weight: 500;
	font-size: 1em;
}

blockquote {
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
  margin-inline-start: 10px;
  margin-inline-end: 20px;
  padding-left: 10px;
  border-left: 2px solid #1371b8;
}

/* Images and files */
.markdown-content img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 4px 0;
  /* box-shadow: 0 2px 4px rgba(0,0,0,0.1); */
  /* border: 1px solid var(--vscode-panel-border); */
  /* background-color: white; */
  display: inline-block;
  vertical-align: middle;
}

.task-title-container .markdown-content img {
  max-width: 100%;
  max-height: 60px;
  margin: 2px 0;
  display: inline-block;
  vertical-align: middle;
}

.task-description-container .markdown-content img {
  max-width: 100%;
  max-height: 400px;
  width: auto;
  height: auto;
  margin: 8px 0;
  display: block;
  object-fit: contain;
}

/* Image path conversion overlay */
.image-path-overlay-container {
  position: relative;
  display: inline-block;
  max-width: 100%;
  width: 100%;
  overflow-wrap: anywhere;
  word-wrap: normal;
  min-height: 28px;
}

/* Image menu button - styles inherited from unified overlay button styles at top of file */

/* ============================================================================
   DIAGRAM OVERLAY CONTAINER - Mermaid, PlantUML burger menus
   ============================================================================ */

.diagram-overlay-container {
  position: relative;
  display: block;
}

/* Diagram menu button - size and position specific (shared styles in btn-overlay-icon) */
.diagram-overlay-container .diagram-menu-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 24px;
  height: 24px;
  font-size: 14px;
  z-index: 10;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 4px;
}

.diagram-overlay-container:hover .diagram-menu-btn {
  opacity: 1;
}

/* ============================================================================
   RESOURCE PATH MENUS - Consolidated styles for image/include path menus
   ============================================================================ */

/* Shared menu container styles */
.image-path-menu,
.include-path-menu {
  position: absolute;
  right: 0;
  background: var(--vscode-menu-background, #252526);
  border: 1px solid var(--vscode-menu-border, #454545);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  min-width: 160px;
  display: none;
}

/* Menu-specific positioning */
.image-path-menu {
  top: 32px;
  right: 4px;
  max-width: 220px;
  width: max-content;
}

.include-path-menu {
  top: 100%;
  margin-top: 2px;
}

/* Visible state */
.image-path-menu.visible,
.include-path-menu.visible {
  display: block;
}

/* Shared menu item styles */
.image-path-menu-item,
.include-path-menu-item,
.video-path-menu-item {
  display: block;
  width: 100%;
  padding: 6px 12px;
  border: none;
  background: transparent;
  color: var(--vscode-menu-foreground, #cccccc);
  text-align: left;
  cursor: pointer;
  white-space: nowrap;
}

.image-path-menu-item,
.include-path-menu-item {
  font-size: 12px;
}

.video-path-menu-item {
  font-size: 13px;
}

/* Hover states */
.image-path-menu-item:hover:not(:disabled),
.include-path-menu-item:hover:not(:disabled),
.video-path-menu-item:hover:not(.disabled):not(:disabled) {
  background: var(--vscode-menu-selectionBackground, #094771);
  color: var(--vscode-menu-selectionForeground, #ffffff);
}

/* Disabled states */
.image-path-menu-item:disabled,
.image-path-menu-item.disabled,
.include-path-menu-item:disabled,
.include-path-menu-item.disabled {
  opacity: 0.4;
  cursor: not-allowed;
  color: var(--vscode-disabledForeground, #888888);
}

.video-path-menu-item.disabled,
.video-path-menu-item:disabled {
  color: var(--vscode-disabledForeground, #6e6e6e);
  cursor: not-allowed;
}

/* Dividers */
.image-path-menu-divider,
.include-path-menu-divider,
.video-path-menu-divider {
  height: 1px;
  background: var(--vscode-menu-separatorBackground, #454545);
  margin: 4px 0;
}

/* Include path conversion overlay */
.include-path-overlay-container {
  position: relative;
  display: inline-flex;
  align-items: center;
}

/* Include menu button - size overrides (base styles in unified overlay button section) */
/* .include-path-overlay-container .include-menu-btn {
  position: static;
  width: 16px;
  height: 16px;
  margin-left: 2px;
  border-radius: 3px;
  font-size: 10px;
  vertical-align: middle;
} */

/* COLUMN/TASK INCLUDES: Always show menu button for Search for File functionality */
.include-path-overlay-container[data-include-type="column"] .include-menu-btn,
.include-path-overlay-container[data-include-type="task"] .include-menu-btn {
  opacity: 1 !important;
}

/* Broken state styles are in the unified overlay button section at top of file */

.markdown-content a[href$=".pdf"],
.markdown-content a[href$=".doc"],
.markdown-content a[href$=".docx"],
.markdown-content a[href$=".txt"],
.markdown-content a[href$=".zip"],
.markdown-content a[href$=".rar"] {
  display: inline-flex;
  align-items: center;
  padding: 4px 8px;
  background-color: var(--button-secondary-background);
  color: var(--button-secondary-foreground);
  border-radius: 4px;
  text-decoration: none;
  margin: 2px;
  font-size: 0.9em;
  transition: background-color 0.2s;
}

.markdown-content a[href$=".pdf"]:hover,
.markdown-content a[href$=".doc"]:hover,
.markdown-content a[href$=".docx"]:hover,
.markdown-content a[href$=".txt"]:hover,
.markdown-content a[href$=".zip"]:hover,
.markdown-content a[href$=".rar"]:hover {
  background-color: var(--button-secondary-background-hover);
}

.markdown-content a[href$=".pdf"]::before { content: " "; }
.markdown-content a[href$=".doc"]::before,
.markdown-content a[href$=".docx"]::before { content: " "; }
.markdown-content a[href$=".txt"]::before { content: " "; }
.markdown-content a[href$=".zip"]::before,
.markdown-content a[href$=".rar"]::before { content: " "; }
.markdown-content a[href$=".jpg"]::before,
.markdown-content a[href$=".jpeg"]::before,
.markdown-content a[href$=".png"]::before,
.markdown-content a[href$=".gif"]::before,
.markdown-content a[href$=".svg"]::before { content: " "; }

/* Speaker Notes */
.speaker-note {
  color: var(--vscode-textCodeBlock-foreground, #888);
  background-color: var(--vscode-textCodeBlock-background, rgba(0, 0, 0, 0.05));
  padding: 8px 12px;
  margin: 4px 0;
  border-left: 3px solid var(--vscode-editorInfo-foreground, #4a9eff);
  border-radius: 3px;
  font-size: 0.9em;
  font-style: italic;
  opacity: 0.75;
  transition: opacity 0.2s ease;
}

.speaker-note:hover {
  opacity: 1;
}

/* HTML Comment Markers */
.html-comment-marker {
  /* color: var(--vscode-editor-foreground, #cccccc);
  background-color: var(--vscode-input-background, rgba(60, 120, 60, 0.25)); */
  color: var(--vscode-textPreformat-foreground, #666);
  background-color: var(--vscode-textPreformat-background, transparent);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.85em;
  font-family: 'Courier New', monospace;
  font-style: normal;
  font-weight: 500;
  white-space: pre-wrap;
  word-break: break-all;
  user-select: none;
  border: 1px solid var(--vscode-editorInfo-foreground, #4a9eff);
  opacity: 0.9;
  transition: all 0.2s ease;
  display: inline;
  vertical-align: middle;
}

.html-comment-marker:hover {
  opacity: 1;
  /* background-color: var(--vscode-input-background, rgba(60, 120, 60, 0.4)); */
  border-color: var(--vscode-focusBorder, #007acc);
}

/* HTML Content rendered as text */
.html-content-text {
  color: var(--vscode-textPreformat-foreground);
  background-color: var(--vscode-textPreformat-background);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.85em;
  font-family: 'Courier New', monospace;
  font-style: normal;
  font-weight: 500;
  white-space: pre-wrap;
  word-break: break-all;
  user-select: text;
  border: 1px dashed var(--vscode-editorWarning-foreground, #cc6600);
  opacity: 0.8;
  transition: all 0.2s ease;
  display: inline-block;
  vertical-align: middle;
}

.html-content-text:hover {
  opacity: 1;
  border-color: var(--vscode-focusBorder, #007acc);
  border-style: solid;
}

/* Tags */
.kanban-tag {
  color: var(--vscode-badge-foreground);
  background-color: var(--vscode-badge-background);
  padding: 0px 2px;
  border-radius: 4px;
  font-size: 0.85em;
  font-weight: 500;
  white-space: nowrap;
  user-select: none;
  border: 1px solid var(--vscode-badge-background);
  transition: all 0.2s ease;
}

.kanban-tag:hover {
  opacity: 0.8;
}

/* Highlight lines/paragraphs containing tags in description */
.task-description-display p:has(.kanban-tag),
.task-description-display li:has(.kanban-tag),
.task-description-display div:has(.kanban-tag):not(.include-container):not(.task-section):not(.include-content-area) {
  background-color: var(--vscode-list-hoverBackground);
  padding: 2px 4px;
  margin: 2px 0;
  border-radius: 3px;
  border-left: 2px solid var(--vscode-badge-background);
}

/* Special styling for span and row tags */
.kanban-tag[data-tag^="span"],
.kanban-tag[data-tag^="row"],
.kanban-tag[data-tag^="stack"] {
  color: #666;
  background-color: transparent;
  border: 1px dashed #999;
  opacity: 0.7;
}

.kanban-full-height-column[data-column-tag] {
  transition: padding 0.2s ease;
}

.task-item[data-task-tag] {
  transition: padding 0.2s ease;
}

.column-title-text .kanban-tag,
.task-title-display .kanban-tag {
  vertical-align: left;
  display: inline-table;
}

/* Ensure tags in task descriptions are strictly inline without any card-level styling */
/* Double class selector increases specificity to override [data-tag] rules without !important */
.task-description-display .kanban-tag.kanban-tag {
  vertical-align: middle;
  display: inline;
  position: static;
  /* Ensure inline-only styling - no headers/footers */
  border: 1px solid var(--vscode-badge-background);
  background-color: var(--vscode-badge-background);
  margin: 0;
  padding: 0px 2px;
  /* Reset any overrides from specialized tag rules */
  color: var(--vscode-badge-foreground);
  opacity: 1;
  box-shadow: none;
}

/* Explicitly prevent any pseudo-elements on description tags */
.task-description-display .kanban-tag.kanban-tag::before,
.task-description-display .kanban-tag.kanban-tag::after {
  display: none;
  content: none;
}

/* Corner badge containers - flexbox based positioning */
.corner-badges-container {
  position: absolute;
  display: flex;
  pointer-events: none;
  z-index: 10;
  gap: 16px;
  translate: translateZ(1px) translate(0px,-2.0px);
}

/* Positioning for each corner - horizontal by default */
.corner-badges-container.top-left {
  top: 0px;
  left: -8px;
  flex-direction: row;
}

.corner-badges-container.top-right {
  top: 0px;
  right: -8px;
  flex-direction: row;
}

.corner-badges-container.bottom-left {
  bottom: -8px;
  left: -8px;
  flex-direction: row;
}

.corner-badges-container.bottom-right {
  bottom: -8px;
  right: -8px;
  flex-direction: row;
}

/* Vertical layout for vertically folded columns */
.collapsed-vertical .corner-badges-container.top-left,
.collapsed-vertical .corner-badges-container.top-right {
  flex-direction: column;
}

.collapsed-vertical .corner-badges-container.bottom-left,
.collapsed-vertical .corner-badges-container.bottom-right {
  flex-direction: column;
}

/* Corner badges */
.corner-badge {
  position: relative; /* Changed from absolute since container handles positioning */
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 11px;
  z-index: 100; /* Increased from 50 to appear above borders */
  pointer-events: none;
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  background: #666; /* Default background color as fallback */
  color: #fff; /* Default text color as fallback */
  padding: 4px;
}

/* Ensure corner badges for specific tags (like corner-badge-feature) appear above borders */
[class*="corner-badge-"] {
  z-index: 100 !important; /* Ensure all corner badges appear above borders */
  pointer-events: none;
}

/* Numeric corner badges - need explicit sizing and border-radius like numeric-badge */
.corner-badge[class*="corner-badge-numeric-"] {
  min-width: 24px;
  height: 24px;
  padding: 0 6px;
  border-radius: 4px;
  font-size: 12px;
  background-color: var(--vscode-badge-background, #4d4d4d) !important;
  color: var(--vscode-badge-foreground, #ffffff) !important;
}

/* Adjust corner badge positioning to account for padding */
.kanban-full-height-column .corner-badge,
.kanban-full-height-column [class*="corner-badge-"] {
  /* Override inline styles to push badges outside padding area */
  margin-top: calc(var(--whitespace) * -1) !important;
  margin-right: calc(var(--whitespace) * -1) !important;
}

.corner-badge[data-badge-index="1"] {
  z-index: 100;
}

.corner-badge[data-badge-index="2"] {
  z-index: 101;
}

.corner-badge[data-badge-index="3"] {
  z-index: 102;
}

/* REMOVED: CSS positioning creates initial wrong position, then JavaScript corrects it later causing delay
 * ONLY JavaScript dynamic positioning should be used (menuOperations.js)
 * NO CSS :has() rules for numeric badge positioning
 */

/* Temporal highlighting for columns and tasks */
/* Border style (default) - consolidated using :is() for week/day/weekday/time/hour */
.kanban-full-height-column:is(
  [data-current-week="true"],
  [data-current-day="true"],
  [data-current-weekday="true"],
  [data-current-time="true"],
  [data-current-hour="true"]
) :is(.column-header, .column-title, .column-inner, .column-footer),
.task-item:is(
  [data-current-week="true"],
  [data-current-day="true"],
  [data-current-weekday="true"],
  [data-current-time="true"],
  [data-current-hour="true"]
) {
  border-right: var(--current-week-border-width) var(--current-week-border-style) var(--current-week-highlight-color) !important;
}

/* Background style - add class 'week-highlight-background' to body to enable */
body.week-highlight-background .kanban-full-height-column[data-current-week="true"] .column-header,
body.week-highlight-background .kanban-full-height-column[data-current-week="true"] .column-title,
body.week-highlight-background .kanban-full-height-column[data-current-week="true"] .column-inner,
body.week-highlight-background .kanban-full-height-column[data-current-week="true"] .column-footer {
  background-color: var(--current-week-highlight-color) !important;
  opacity: 0.2;
}

body.week-highlight-background .task-item[data-current-week="true"] {
  background-color: var(--current-week-highlight-color) !important;
  opacity: 0.9;
}

/* Glow style - add class 'week-highlight-glow' to body to enable */
body.week-highlight-glow .kanban-full-height-column[data-current-week="true"] .column-header,
body.week-highlight-glow .kanban-full-height-column[data-current-week="true"] .column-title,
body.week-highlight-glow .kanban-full-height-column[data-current-week="true"] .column-inner,
body.week-highlight-glow .kanban-full-height-column[data-current-week="true"] .column-footer {
  box-shadow: var(--current-week-glow-size) var(--current-week-highlight-color) !important;
}

body.week-highlight-glow .task-item[data-current-week="true"] {
  box-shadow: var(--current-week-glow-size) var(--current-week-highlight-color) !important;
}

/* Line-level temporal highlighting for minute slots in task descriptions */
/* When a paragraph contains an active minute slot (!:15-:30), highlight the entire line */
.task-description-display p:has([data-temporal-line-active="true"]),
.task-description-display li:has([data-temporal-line-active="true"]) {
  border-right: var(--current-week-border-width) var(--current-week-border-style) var(--current-week-highlight-color) !important;
  padding-right: 8px;
  margin-right: -4px;
}

/* Fallback for browsers that don't support :has() - highlight the span itself more prominently */
.kanban-temporal-minuteSlot.temporal-active {
  border-right: var(--current-week-border-width) var(--current-week-border-style) var(--current-week-highlight-color) !important;
  padding-right: 4px;
}

/* Header and footer bars */
.header-bar,
.footer-bar {
	position: relative;
  width: 100%;
  flex-shrink: 0;
  pointer-events: none;
  transition: all 0.2s ease;
}

/* Footer bars styling when in column-footer */
.column-footer > .footer-bars-container {
  position: relative;
  border-top: none;
}

.kanban-full-height-column:not(.collapsed-vertical):not(.collapsed-horizontal) .header-bar,
.kanban-full-height-column:not(.collapsed-vertical):not(.collapsed-horizontal) .footer-bar {
  position: relative;
}

.kanban-full-height-column::before,
.kanban-full-height-column::after,
.task-item::before,
.task-item::after {
  pointer-events: none;
}

[data-all-tags] {
  border-width: 0;
}

/* Collapsed column label sizing */
.kanban-full-height-column.collapsed-vertical.has-header-label,
.kanban-full-height-column.collapsed-vertical.has-footer-label,
.kanban-full-height-column.collapsed-vertical.has-header-label.has-footer-label {
  width: 80px !important;
  min-width: 80px !important;
  max-width: 80px !important;
}

.kanban-full-height-column:not(.collapsed-vertical):not(.collapsed-horizontal) .column-content {
  margin: 0;
}

.kanban-full-height-column .corner-badge,
.kanban-full-height-column [class*="corner-badge-"] {
  z-index: 100 !important;
  pointer-events: none;
}

/* Custom (user-added) tags styling */
.donut-menu-tag-chip.custom-tag {
    font-style: italic;
    opacity: 0.9;
}

.donut-menu-tag-chip.custom-tag:not(.active) {
    border-style: dashed !important;
}

.donut-menu-tag-chip.custom-tag.active {
    font-style: normal;
}

/* Visual separator for custom tags section */
.donut-menu-item:has(.custom-tag)::before {
    content: '';
    position: absolute;
    top: 0;
    left: 12px;
    right: 12px;
    height: 1px;
    background: var(--vscode-panel-border);
}

.context-menu {
    position: fixed;
    background: var(--vscode-menu-background);
    border: 1px solid var(--vscode-menu-border);
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    z-index: 10000;
    min-width: 150px;
    padding: 4px 0;
}

.context-menu-item {
    padding: 6px 12px;
    cursor: pointer;
    font-size: 13px;
    color: var(--vscode-menu-foreground);
}

.context-menu-item:hover {
    background: var(--vscode-menu-selectionBackground);
}

/* Fix collapsed add task button in dark mode */
/* light mode */
body.vscode-light .collapsed-add-task-btn,
body.vscode-high-contrast-light .collapsed-add-task-btn {
  background: #fff;
  color: #000;
  border: 1px solid #000;
}

body.vscode-light .collapsed-add-task-btn:hover,
body.vscode-high-contrast-light .collapsed-add-task-btn:hover {
  background: #fff;
  color: #000;
  border: 1px solid #000;
}

/* dark mode */
.vscode-dark .collapsed-add-task-btn,
.vscode-high-contrast .collapsed-add-task-btn {
    background: #000;
    color: var(--vscode-descriptionForeground);
    border: 1px solid var(--vscode-descriptionForeground);
}

.vscode-dark .collapsed-add-task-btn:hover,
.vscode-high-contrast .collapsed-add-task-btn:hover {
    /* background: #ffffff; */
    background: #1a1a1a;
    color: var(--vscode-descriptionForeground);
    border: 1px solid var(--vscode-descriptionForeground);
}

/* Date and person tags */
.kanban-date-tag {
    color: var(--vscode-charts-blue);
    background-color: rgba(0, 122, 204, 0.1);
    padding: 0px 4px;
    display: inline;
    border-radius: 4px;
    font-size: 0.85em;
    font-weight: 500;
    white-space: nowrap;
    user-select: none;
    border: 1px solid var(--vscode-charts-blue);
    transition: all 0.2s ease;
    position: relative;
    padding-left: 16px;
}

.kanban-date-tag::before {
    content: '';
    position: absolute;
    left: 2px;
    font-size: 10px;
}

.kanban-person-tag {
    color: var(--vscode-charts-purple);
    background-color: rgba(138, 43, 226, 0.1);
    padding: 0px 4px;
    display: inline;
    border-radius: 4px;
    font-size: 0.85em;
    font-weight: 500;
    white-space: nowrap;
    user-select: none;
    border: 1px solid var(--vscode-charts-purple);
    transition: all 0.2s ease;
    position: relative;
    padding-left: 16px;
}

.kanban-person-tag::before {
    content: '';
    position: relative;
    left: 2px;
    /* top: -6px; */
    font-size: 10px;
}

kanban-full-height-column collapsed-vertical .kanban-person-tag::before {
    position: relative;
    left: -2px;
    top: -6px;
}

.kanban-date-tag:hover,
.kanban-person-tag:hover {
    opacity: 0.8;
}

/* Week tag styling (same as date tag but no icon) */
.kanban-week-tag {
    color: var(--vscode-charts-blue);
    background-color: rgba(0, 122, 204, 0.1);
    padding: 0px 4px;
    display: inline;
    border-radius: 4px;
    font-size: 0.85em;
    font-weight: 500;
    white-space: nowrap;
    user-select: none;
    border: 1px solid var(--vscode-charts-blue);
    transition: all 0.2s ease;
    position: relative;
}

.kanban-week-tag:hover {
    opacity: 0.8;
}

/* Ensure week tags stay inline in folded columns */
.collapsed .kanban-week-tag {
    display: inline !important;
}

/* =============================================================================
   TEMPORAL TAGS (.prefix) - Dates, Weeks, Weekdays, Times, Time Slots
   ============================================================================= */

/* Base styling for all temporal tags */
.kanban-temporal-tag {
    color: var(--vscode-charts-green, #4ec9b0);
    background-color: rgba(78, 201, 176, 0.1);
    padding: 0px 4px;
    display: inline;
    border-radius: 4px;
    font-size: 0.85em;
    font-weight: 500;
    white-space: nowrap;
    user-select: none;
    border: 1px solid var(--vscode-charts-green, #4ec9b0);
    transition: all 0.2s ease;
    position: relative;
}

/* Icon styling */
.kanban-temporal-tag .temporal-icon {
    font-size: 0.9em;
    margin-right: 2px;
    vertical-align: middle;
}

/* Hover effect */
.kanban-temporal-tag:hover {
    opacity: 0.8;
}

/* Active temporal tag - NO special highlight, task border is highlighted instead */

/* Type-specific color variations */
.kanban-temporal-date {
    color: var(--vscode-charts-blue, #007acc);
    background-color: rgba(0, 122, 204, 0.1);
    border-color: var(--vscode-charts-blue, #007acc);
}

.kanban-temporal-week {
    color: var(--vscode-charts-blue, #007acc);
    background-color: rgba(0, 122, 204, 0.1);
    border-color: var(--vscode-charts-blue, #007acc);
}

.kanban-temporal-weekday {
    color: var(--vscode-charts-purple, #8a2be2);
    background-color: rgba(138, 43, 226, 0.1);
    border-color: var(--vscode-charts-purple, #8a2be2);
}

.kanban-temporal-time {
    color: var(--vscode-charts-blue, #007acc);
    background-color: rgba(0, 122, 204, 0.1);
    border-color: var(--vscode-charts-blue, #007acc);
}

.kanban-temporal-timeSlot {
    color: var(--vscode-charts-blue, #007acc);
    background-color: rgba(0, 122, 204, 0.1);
    border-color: var(--vscode-charts-blue, #007acc);
}

/* Ensure temporal tags stay inline in collapsed columns */
.collapsed .kanban-temporal-tag {
    display: inline !important;
}

/* Sort button */
.sort-btn {
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.sort-icon {
    font-size: 14px;
}

/* Focus highlight animation for undo/redo */
.focus-highlight {
    animation: focusHighlight 2s ease-out;
    position: relative;
}

@keyframes focusHighlight {
    0% {
        box-shadow: 0 0 0 4px var(--vscode-focusBorder);
        background-color: var(--vscode-list-activeSelectionBackground);
    }
    50% {
        box-shadow: 0 0 0 8px var(--vscode-focusBorder);
    }
    100% {
        box-shadow: 0 0 0 0 transparent;
        background-color: transparent;
    }
}

/* ============================================
   MARKDOWN ICON CSS - Compact Width Version
   ============================================ */

/* Auto-insert compact style indicators - only within .markdown-content */

/* Headings - only before */
.markdown-content h1::before,
.markdown-content h2::before,
.markdown-content h3::before,
.markdown-content h4::before,
.markdown-content h5::before,
.markdown-content h6::before {
  display: inline-block; text-align: center;
  width: 14px !important; min-width: 14px !important; max-width: 14px !important;
  height: 14px !important; min-height: 14px !important; max-height: 14px !important;
  margin-right: 4px; padding: 0 !important;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace !important; font-size: 8px !important; 
  font-weight: bold !important; font-style: normal !important;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  line-height: 14px !important; vertical-align: middle; opacity: 0.7;
  box-sizing: border-box !important; overflow: hidden !important;
  letter-spacing: normal !important; word-spacing: normal !important;
  text-transform: none !important; white-space: nowrap !important;
}
.markdown-content h1::before { content: "H1"; }
.markdown-content h2::before { content: "H2"; }
.markdown-content h3::before { content: "H3"; }
.markdown-content h4::before { content: "H4"; }
.markdown-content h5::before { content: "H5"; }
.markdown-content h6::before { content: "H6"; }

/* Bold - before and after */
.markdown-content strong::before, .markdown-content strong::after,
.markdown-content b::before, .markdown-content b::after {
  content: "*"; display: inline-block;
  width: 12px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 9px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content strong::before, .markdown-content b::before { margin-right: 2px; }
.markdown-content strong::after, .markdown-content b::after { margin-left: 2px; }

/* Italic - before and after */
.markdown-content em::before, .markdown-content em::after,
.markdown-content i::before, .markdown-content i::after {
  content: "_"; display: inline-block;
  width: 12px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 9px !important; font-style: normal;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content em::before, .markdown-content i::before { margin-right: 2px; }
.markdown-content em::after, .markdown-content i::after { margin-left: 2px; }

/* Strikethrough - before and after */
.markdown-content del::before, .markdown-content del::after,
.markdown-content s::before, .markdown-content s::after,
.markdown-content strike::before, .markdown-content strike::after {
  content: "~"; display: inline-block;
  width: 12px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 9px !important;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; text-decoration: none; opacity: 0.6;
}
.markdown-content del::before, .markdown-content s::before, .markdown-content strike::before { margin-right: 2px; }
.markdown-content del::after, .markdown-content s::after, .markdown-content strike::after { margin-left: 2px; }

/* Inline code - before and after */
.markdown-content code::before, .markdown-content code::after {
  content: "`"; display: inline-block;
  width: 12px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 10px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content code::before { margin-right: 2px; }
.markdown-content code::after { margin-left: 2px; }
.markdown-content pre code::before, .markdown-content pre code::after { display: none; }

/* Preformatted text / Code block - only before */
.markdown-content pre::before {
  content: "{}"; display: inline-block; float: left;
  width: 20px; height: 16px; margin-right: 6px; margin-top: 2px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 9px !important; font-weight: bold;
  background: rgba(45, 45, 45, 0.6); color: rgba(255, 255, 255, 0.8);
  text-align: center; line-height: 16px !important;
  vertical-align: top; opacity: 0.7;
}

/* Underline - before and after */
.markdown-content u::before, .markdown-content u::after {
  content: "u"; display: inline-block;
  width: 12px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 8px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; text-decoration: none;
  text-transform: lowercase; opacity: 0.6;
}
.markdown-content u::before { margin-right: 2px; }
.markdown-content u::after { margin-left: 2px; }

/* Mark/Highlight - before and after */
.markdown-content mark::before, .markdown-content mark::after {
  content: "="; display: inline-block;
  width: 14px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 9px !important; font-weight: bold;
  background: rgba(255, 235, 59, 0.4); color: rgba(51, 51, 51, 0.7);
  vertical-align: text-bottom;
  line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content mark::before { margin-right: 2px; }
.markdown-content mark::after { margin-left: 2px; }

/* Links - before and after with brackets */
.markdown-content a::before, .markdown-content a::after {
  display: inline; width: 10px; height: 14px;
  border: 1px solid rgba(74, 144, 226, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 10px !important; font-weight: bold;
  background: rgba(227, 242, 253, 0.6); color: rgba(25, 118, 210, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content a::before { content: "["; margin-right: 2px; }
.markdown-content a::after { content: "]"; margin-left: 2px; }

/* Tables - only before */
.markdown-content table::before {
  content: ""; display: inline-block;
  width: 20px; height: 16px; margin-right: 6px; margin-bottom: 4px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 12px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 16px !important; opacity: 0.7;
}

/* Superscript/Subscript - before and after */
.markdown-content sup::before, .markdown-content sup::after,
.markdown-content sub::before, .markdown-content sub::after {
  display: inline-block; width: 10px; height: 12px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 8px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 12px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content sup::before, .markdown-content sup::after { content: "^"; }
.markdown-content sub::before, .markdown-content sub::after { content: ""; }
.markdown-content sup::before, .markdown-content sub::before { margin-right: 1px; }
.markdown-content sup::after, .markdown-content sub::after { margin-left: 1px; }

/* Keyboard input - before and after */
.markdown-content kbd::before, .markdown-content kbd::after {
  content: ""; display: inline-block;
  width: 10px; height: 14px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 8px !important;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 14px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content kbd::before { margin-right: 2px; }
.markdown-content kbd::after { margin-left: 2px; }

/* Abbreviation - before and after */
.markdown-content abbr::before, .markdown-content abbr::after {
  content: "?"; display: inline-block;
  width: 10px; height: 12px;
  border: 1px solid rgba(102, 102, 102, 0.5); border-radius: 2px;
  font-family: monospace; font-size: 8px !important; font-weight: bold;
  background: rgba(240, 240, 240, 0.6); color: rgba(51, 51, 51, 0.7);
  text-align: center; line-height: 12px !important;
  vertical-align: middle; opacity: 0.6;
}
.markdown-content abbr::before { margin-right: 1px; }
.markdown-content abbr::after { margin-left: 1px; }

/* Collapsed state adjustments */

/* Column width is now handled via --column-width CSS variable set from baseOptions */
/* This allows all width values (px and vw) to be defined in one place: baseOptions.columnWidth */

/* Column Span Classes - for columns that span multiple widths */
.kanban-full-height-column.column-span-2 {
  width: calc(var(--column-width) * 2 + var(--whitespace)) !important; /* 2x width plus 1 gap */
  flex-shrink: 0;
}

.kanban-full-height-column.column-span-3 {
  width: calc(var(--column-width) * 3 + var(--whitespace) * 2) !important; /* 3x width plus 2 gaps */
  flex-shrink: 0;
}

.kanban-full-height-column.column-span-4 {
  width: calc(var(--column-width) * 4 + var(--whitespace) * 3) !important; /* 4x width plus 3 gaps */
  flex-shrink: 0;
}

/* Collapsed span columns should use normal collapsed width */
.kanban-full-height-column.collapsed-vertical.column-span-2,
.kanban-full-height-column.collapsed-horizontal.column-span-2,
.kanban-full-height-column.collapsed-vertical.column-span-3,
.kanban-full-height-column.collapsed-horizontal.column-span-3,
.kanban-full-height-column.collapsed-vertical.column-span-4,
.kanban-full-height-column.collapsed-horizontal.column-span-4 {
  width: var(--collapsed-column-width) !important;
  min-width: var(--collapsed-column-width) !important;
  max-width: var(--collapsed-column-width) !important;
}

/* Font size classes are now generated dynamically by JavaScript */

/* Note: Sticky header disabling for large fonts removed - now controlled manually via burger menu */

/* Disable sticky header for tall task minimum heights */
body.tall-task-height .column-title {
  position: relative !important;
  top: auto !important;
}

/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;400;500;600;700&display=swap');

/* Font family styles */
body.font-family-system {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-roboto {
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-opensans {
  font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-lato {
  font-family: 'Lato', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-poppins {
  font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-inter {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body.font-family-helvetica {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

body.font-family-arial {
  font-family: Arial, sans-serif;
}

body.font-family-georgia {
  font-family: Georgia, 'Times New Roman', serif;
}

body.font-family-times {
  font-family: 'Times New Roman', Times, serif;
}

body.font-family-firacode {
  font-family: 'Fira Code', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
}

body.font-family-jetbrains {
  font-family: 'JetBrains Mono', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
}

body.font-family-sourcecodepro {
  font-family: 'Source Code Pro', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
}

body.font-family-consolas {
  font-family: Consolas, 'Courier New', monospace;
}

/* Card focus styles for keyboard navigation */
.task-item.card-focused {
    outline: 3px solid var(--task-focus-color);
    outline-offset: -3px;
    position: relative;
    z-index: 1;
}

/* Multi-column layout styles */
.multicolumn {
    display: flex !important;
    flex-direction: row !important;
    align-items: flex-start !important;
    gap: 10px;
    margin: 10px 0;
}

.multicolumn-column {
    flex-basis: 0 !important;
    padding: 10px;
    min-width: 0; /* Allow columns to shrink */
}

/* Mark/highlight styling */
mark {
    background-color: var(--vscode-editor-findMatchHighlightBackground, #ffaa88);
    color: var(--vscode-editor-foreground);
    padding: 1px 2px;
    border-radius: 2px;
    display: inline-block;
    word-break: break-word;
}

.vscode-dark mark {
    background-color: var(--vscode-editor-findMatchHighlightBackground, #885533);
    color: var(--vscode-editor-foreground);
}

/* Additional markdown-it plugin styles */
sub, sup {
    font-size: 0.75em;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sub {
    bottom: -0.25em;
}

sup {
    top: -0.5em;
}

ins {
    text-decoration: underline;
    background-color: var(--vscode-editor-insertedTextBackground, rgba(0, 255, 0, 0.2));
    color: var(--vscode-editor-foreground);
}

u {
    text-decoration: underline;
}

s {
    text-decoration: line-through;
}

/* Container styles */
.note, .comment, .highlight {
    margin: 10px 0;
    padding: 10px;
    border-radius: 4px;
    border-left: 4px solid;
}

.note {
    background-color: var(--vscode-textBlockQuote-background, rgba(0, 122, 204, 0.1));
    border-left-color: var(--vscode-textBlockQuote-border, #007acc);
}

.comment {
    background-color: var(--vscode-editor-inactiveSelectionBackground, rgba(128, 128, 128, 0.1));
    border-left-color: var(--vscode-descriptionForeground, #888);
}

.highlight {
    background-color: var(--vscode-editor-findMatchHighlightBackground, rgba(255, 235, 59, 0.3));
    border-left-color: var(--vscode-editor-findMatchBorder, #ffeb3b);
}

.mark-red { background-color: rgba(255, 0, 0, 0.1); border-left-color: #ff0000; }
.mark-green { background-color: rgba(0, 255, 0, 0.1); border-left-color: #00ff00; }
.mark-blue { background-color: rgba(0, 0, 255, 0.1); border-left-color: #0000ff; }
.mark-cyan { background-color: rgba(0, 255, 255, 0.1); border-left-color: #00ffff; }
.mark-magenta { background-color: rgba(255, 0, 255, 0.1); border-left-color: #ff00ff; }
.mark-yellow { background-color: rgba(255, 255, 0, 0.1); border-left-color: #ffff00; }

.center { text-align: center; }
.center100 { text-align: center; width: 100%; }
.right { text-align: right; }
.caption {
    font-style: italic;
    text-align: center;
    color: var(--vscode-descriptionForeground, #888);
    font-size: 0.9em;
}

/* Include file processing styles */
.columninclude-link,
.include-filename-link,
.include-placeholder,
.include-placeholder-block,
.broken-include-placeholder {
    font-size: 0.9em;
    font-family: var(--vscode-font-family);
}

.include-placeholder {
    display: inline-block;
    padding: 2px 6px;
    background-color: var(--vscode-badge-background, rgba(0, 122, 204, 0.2));
    color: var(--vscode-badge-foreground, var(--vscode-foreground));
    border-radius: 3px;
    border: 1px solid var(--vscode-panel-border, rgba(255, 255, 255, 0.1));
    animation: pulse 2s infinite;
}

.include-error .column-title {
    /* display: inline-block;
    padding: 2px 6px; */
    /* border-radius: 3px;
    font-size: 0.85em;
    font-family: var(--vscode-font-family); */
    /* background-color: var(--vscode-errorBackground, rgba(255, 0, 0, 0.1)) !important;
    color: var(--vscode-errorForeground, #ff6b6b) !important;
    border: 1px solid var(--vscode-errorBorder, rgba(255, 0, 0, 0.3)); */
}

/* .include-container.include-error {
    display: block;
    padding: inherit;
    font-size: inherit;
    border-color: var(--vscode-errorBorder, rgba(255, 0, 0, 0.6)) !important;
    background-color: var(--vscode-errorBackground, rgba(255, 0, 0, 0.1)) !important;
} */

.included-content-inline {
    /* Inline included content should blend seamlessly */
    display: block;
    border-top: 1px dashed gray;
    border-bottom: 1px dashed gray;
    position: relative;
    padding-right: 25px; /* Make room for the icon in top-right */
    padding-top: 5px;
    padding-bottom: 5px;
    padding-left: 5px;
    min-height: 20px; /* Ensure minimum height for icon placement */
}

/* Add icon in top right corner of included content */
.included-content-inline::before {
    content: "";
    position: absolute;
    top: 2px;
    right: 2px;
    cursor: pointer;
    padding: 1px 3px;
    border-radius: 2px;
    font-size: 14px;
    opacity: 0.7;
    transition: all 0.2s ease;
    height: 14px;
    width: 14px;
    line-height: 14px;
    text-align: center;
    z-index: 1;
    background-color: var(--vscode-editor-background);
}

.included-content-inline:hover::before {
    opacity: 1;
    background-color: var(--button-background-hover);
    transform: scale(1.1);
}

.included-content-block {
    /* Block included content with visual indication */
    display: block;
		border: 0.5px dashed gray;
    /* border-top: 1px  gray;
    border-bottom: 1px solid gray;
    border-left: 2px solid var(--vscode-panel-border, rgba(255, 255, 255, 0.1)); */
    position: relative;
    padding-right: 25px; /* Make room for the icon in top-right */
    padding-top: 5px;
    padding-bottom: 5px;
    padding-left: 8px;
    margin: 4px 0;
    min-height: 20px; /* Ensure minimum height for icon placement */
}

/* Add icon in top right corner of block included content */
.included-content-block::before {
    content: "";
    position: absolute;
    top: 2px;
    right: 2px;
    cursor: pointer;
    padding: 1px 3px;
    border-radius: 2px;
    font-size: 14px;
    opacity: 0.7;
    transition: all 0.2s ease;
    height: 14px;
    width: 14px;
    line-height: 14px;
    text-align: center;
    z-index: 1;
    background-color: var(--vscode-editor-background);
}

.included-content-block:hover::before {
    opacity: 1;
    background-color: var(--button-background-hover);
    transform: scale(1.1);
}

/* Regular include bordered container with title bar */
.include-container {
    display: block;
    border: 1px solid var(--vscode-panel-border, rgba(255, 255, 255, 0.2));
    border-radius: 4px;
    margin: 0.5em 0;
    overflow: hidden;
}

.include-title-bar {
    display: flex;
    align-items: center;
    padding: 4px 8px;
    /* background-color: var(--vscode-sideBar-background, rgba(255, 255, 255, 0.05)); */
    border-bottom: 1px solid var(--vscode-panel-border, rgba(255, 255, 255, 0.1));
    font-size: 0.9em;
    font-family: var(--vscode-font-family);
    position: relative;
    overflow: visible;
}

/* Allow menu to escape include-container when visible */
.include-container:has(.include-path-menu.visible) {
    overflow: visible;
}

.include-content-area {
    padding: 8px 12px;
    /* background-color: var(--vscode-editor-background); */
}

@keyframes highlightFlash {
    0% {
        background-color: transparent;
        box-shadow: none;
        outline: 3px solid transparent;
        outline-offset: -3px;
    }
    50% {
        background-color: var(--vscode-editor-findMatchHighlightBackground, rgba(255, 235, 59, 0.4));
        box-shadow: 0 0 8px var(--vscode-editor-findMatchHighlightBackground, rgba(255, 235, 59, 0.6));
        outline: 3px solid var(--vscode-focusBorder, #007ACC);
        outline-offset: -3px;
    }
    100% {
        background-color: transparent;
        box-shadow: none;
        outline: 3px solid transparent;
        outline-offset: -3px;
    }
}

/* Tag Visibility Controls */
/* Standard Tags: Hide #span, #row, and #stack tags only */
.tag-visibility-allexcludinglayout .kanban-tag[data-tag^="span"],
.tag-visibility-allexcludinglayout .kanban-tag[data-tag^="row"],
.tag-visibility-allexcludinglayout .kanban-tag[data-tag^="stack"] {
    display: none !important;
}

/* Custom Tags Only: Hide #span, #row, #stack, and all configured tags (but show @ tags) */
.tag-visibility-customonly .kanban-tag[data-tag^="span"],
.tag-visibility-customonly .kanban-tag[data-tag^="row"],
.tag-visibility-customonly .kanban-tag[data-tag^="stack"],
.tag-visibility-customonly .kanban-tag:not([data-tag^="@"]):not(.custom-tag) {
    display: none !important;
}

/* @ Tags Only: Hide all tags except @ tags */
.tag-visibility-mentionsonly .kanban-tag:not([data-tag^="@"]) {
    display: none !important;
}

/* No Tags: Hide all tags */
.tag-visibility-none .kanban-tag {
    display: none !important;
}

/* Image figures with captions */
figure {
  margin: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  flex: 1;
  min-height: 0;
  /* max-height: inherit;
  max-width: inherit; */
}

figcaption {
  font-size: 0.8em;
  color: var(--vscode-descriptionForeground);
  margin-top: 4px;
  text-align: center;
}

/* =================== LOADING INDICATORS =================== */

.loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--vscode-editor-background);
    opacity: 0.9;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 100;
    gap: 12px;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--vscode-editor-foreground);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    opacity: 0.6;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-text {
    color: var(--vscode-editor-foreground);
    font-size: 13px;
    opacity: 0.8;
}

/* ============================================================================
   Activity Indicators - Progress notifications for long-running operations
   ============================================================================ */

#activity-indicators {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
  max-width: 280px;
}

.activity-indicator {
  background: var(--vscode-notifications-background);
  border: 1px solid var(--vscode-notifications-border);
  border-radius: 6px;
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  color: var(--vscode-notifications-foreground);
  font-size: calc(var(--vscode-font-size, 13px) - 1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  pointer-events: auto;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.3s ease;
  border-left: 3px solid var(--vscode-progressBar-foreground);
}

.activity-indicator.visible {
  opacity: 1;
  transform: translateX(0);
}

.activity-indicator .activity-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.activity-indicator .activity-spinner {
  width: 14px;
  height: 14px;
  border: 2px solid var(--vscode-progressBar-background);
  border-top: 2px solid var(--vscode-progressBar-foreground);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  flex-shrink: 0;
}

.activity-indicator .activity-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 500;
}

.activity-indicator .progress-container {
  height: 4px;
  background: var(--vscode-progressBar-background);
  border-radius: 2px;
  overflow: hidden;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.activity-indicator .progress-container.visible {
  opacity: 1;
}

.activity-indicator .progress-bar {
  height: 100%;
  background: var(--vscode-progressBar-foreground);
  border-radius: 2px;
  width: 0%;
  transition: width 0.3s ease;
}

/* ============================================================================
   Custom Modal Dialogs - Used by modalUtils.js
   ============================================================================ */

.modal.custom-modal,
.modal.loading-modal {
  display: flex;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.modal.loading-modal {
  background: rgba(0, 0, 0, 0.3);
}

.custom-modal .modal-dialog {
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 8px;
  padding: 20px;
  max-width: 400px;
  min-width: 280px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.custom-modal .modal-dialog-title {
  margin: 0 0 15px 0;
  color: var(--vscode-foreground);
  font-size: 16px;
}

.custom-modal .modal-dialog-message {
  margin: 0 0 20px 0;
  color: var(--vscode-descriptionForeground);
  line-height: 1.4;
}

.custom-modal .modal-dialog-buttons {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

.custom-modal .modal-dialog-btn {
  padding: 8px 16px;
  border: 1px solid var(--vscode-button-border);
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
  background: var(--vscode-button-secondaryBackground);
  color: var(--vscode-button-secondaryForeground);
}

.custom-modal .modal-dialog-btn.primary {
  background: var(--vscode-button-background);
  color: var(--vscode-button-foreground);
}

.custom-modal .modal-dialog-btn.danger {
  background: var(--vscode-errorForeground);
  color: var(--vscode-button-foreground);
}

.loading-modal .loading-spinner {
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 8px;
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  color: var(--vscode-foreground);
}

.loading-modal .loading-spinner .spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--vscode-progressBar-background);
  border-top: 2px solid var(--vscode-progressBar-foreground);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.column-loading {
    position: relative;
}

.task-loading {
    position: relative;
}

.column-loading-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    min-height: 200px;
    height: 200px; /* Fixed height to ensure column takes space during loading */
    gap: 16px;
}

.column-loading-placeholder .loading-spinner {
    width: 32px;
    height: 32px;
    border-width: 3px;
}

.column-loading-placeholder .loading-text {
    font-size: 12px;
    opacity: 0.7;
    text-align: center;
}

/* Alternative title styling (shown when task is collapsed with no title) */
.task-alternative-title {
    font-style: italic;
    opacity: 0.7;
    color: var(--vscode-descriptionForeground);
    font-size: 0.95em;

    /* Single line with overflow hidden */
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

#debug-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 10000;
    display: flex;
    align-items: flex-start;
    justify-content: flex-end;
    padding: 60px 20px 20px 20px;
    font-family: var(--vscode-font-family);
    font-size: var(--vscode-font-size);
    pointer-events: none;
}

.debug-panel {
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-panel-border);
    border-radius: 4px;
    max-height: 85vh;
    max-width: 80vw;
    min-width: 40vw;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    pointer-events: auto;
    animation: slideInFromRight 0.2s ease-out;
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.debug-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--whitespace-div4) var(--whitespace-div2);
    border-bottom: 1px solid var(--vscode-panel-border);
    background: var(--vscode-titleBar-activeBackground);
}

.debug-header h3 {
    margin: 0;
    color: var(--vscode-titleBar-activeForeground);
}

.debug-controls {
    display: flex;
    gap: 4px;
    align-items: center;
}

.debug-btn, .debug-close {
    background: var(--button-background);
    color: var(--button-foreground);
    border: var(--button-border);
    padding: 2px 4px 2px 4px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.debug-btn:hover, .debug-close:hover {
    background: var(--button-secondary-background-hover);
}

.debug-close {
    font-weight: bold;
    width: 18px;
    height: 18px;
}

.debug-content {
    padding: var(--vscode-whitespace);
    overflow-y: auto;
    flex: 1;
}

.debug-timestamp {
    color: var(--vscode-descriptionForeground);
    font-size: 10px;
    white-space: nowrap;
    opacity: 0.8;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.stat-label {
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
}

.stat-value {
    font-weight: bold;
    color: var(--vscode-foreground);
}

.debug-group {
    margin-bottom: 24px;
    border: 1px solid var(--vscode-panel-border);
    border-radius: 6px;
    overflow: hidden;
}

.debug-group h4 {
    margin: 0;
    padding: 12px 16px;
    background: var(--vscode-sideBar-background);
    color: var(--vscode-sideBar-foreground);
    font-size: 13px;
    font-weight: 600;
    border-bottom: 1px solid var(--vscode-panel-border);
}

.debug-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 16px;
    border-bottom: 1px solid var(--vscode-panel-border);
}

.debug-item:last-child {
    border-bottom: none;
}

.debug-label {
    font-weight: 500;
    color: var(--vscode-foreground);
}

.debug-value {
    font-family: var(--vscode-editor-font-family);
    font-size: 12px;
}

.status-good { color: var(--vscode-gitDecoration-addedResourceForeground); }
.status-warn { color: var(--vscode-gitDecoration-modifiedResourceForeground); }
.status-bad { color: var(--vscode-gitDecoration-deletedResourceForeground); }
.status-unknown { color: var(--vscode-descriptionForeground); }

/* File States Overview Styles */
.file-states-section {
    padding: var(--whitespace-div4) var(--whitespace-div2);
}

.file-states-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    margin-bottom: 6px;
    padding: 4px;
}

.stat-group {
    display: flex;
    gap: 8px;
}

.watcher-list, .include-list {
    padding: 8px;
}

.watcher-item, .include-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 8px;
    margin: 4px 0;
    background: var(--vscode-list-inactiveSelectionBackground);
    border-radius: 4px;
    font-size: 12px;
}

.include-item {
    flex-direction: column;
    align-items: stretch;
}

.include-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 4px;
}

.include-details {
    display: flex;
    gap: 12px;
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
}

.watcher-type, .include-type {
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
}

.watcher-type.main, .include-type.main {
    background: var(--vscode-gitDecoration-addedResourceForeground);
    color: white;
}
.watcher-type.include, .include-type.include {
    background: var(--vscode-gitDecoration-modifiedResourceForeground);
    color: white;
}
.watcher-type.dependency, .include-type.dependency {
    background: var(--vscode-gitDecoration-untrackedResourceForeground);
    color: white;
}

/* Specific include type styles */
.include-type-label.include-regular, .include-type-label.regular {
    background: #4CAF50 !important;
    color: white !important;
}
.include-type-label.include-column, .include-type-label.column {
    background: #2196F3 !important;
    color: white !important;
}
.include-type-label.include-task, .include-type-label.task {
    background: #FF9800 !important;
    color: white !important;
}
.include-type-label {
    background: #666 !important;
    color: white !important;
}

.watcher-status.active { color: var(--vscode-gitDecoration-addedResourceForeground); }
.watcher-status.inactive { color: var(--vscode-gitDecoration-deletedResourceForeground); }

.detail-item.unsaved { color: var(--vscode-gitDecoration-modifiedResourceForeground); }
.detail-item.saved { color: var(--vscode-gitDecoration-addedResourceForeground); }

/* Table layout styles */
.files-table-container {
    padding: var(--vscode-whitespace);
    background: var(--vscode-editor-background);
    border-radius: 4px;
}

.files-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    margin-top: 8px;
}

.file-row {
    height: 44px;
}

.files-table thead {
    border-bottom: 2px solid var(--vscode-panel-border);
}

.files-table th {
    padding: var(--vscode-whitespace);
    text-align: left;
    font-weight: 600;
    color: var(--vscode-foreground);
    background: var(--vscode-list-inactiveSelectionBackground);
    font-size: 12px;
    white-space: nowrap;
}

.files-table tbody tr {
    border-bottom: 1px solid var(--vscode-panel-border);
}

.files-table tbody tr:last-child {
    border-bottom: none;
}

.files-table tbody tr.main-file {
    background: rgba(135, 206, 235, 0.05);
}

.files-table td {
    padding: var(--vscode-whitespace);
    vertical-align: middle;
}

.col-file {
    width: 20%;
}

.col-frontend,
.col-backend,
.col-saved {
    width: 20%;
}
.col-actions {
    width: 12%;
}
.col-image {
    width: 8%;
}

.sync-status-icon.sync-good {
    color: var(--vscode-gitDecoration-addedResourceForeground);
}

.sync-status-icon.sync-warn {
    color: var(--vscode-gitDecoration-modifiedResourceForeground);
}

.sync-status-icon.sync-unknown {
    color: var(--vscode-descriptionForeground);
    opacity: 0.5;
}

.file-path,
.file-directory-path {
    font-family: var(--vscode-editor-font-family);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

.file-path {
    font-size: 10px;
    color: var(--vscode-descriptionForeground);
    margin-bottom: 2px;
}

.file-directory-path {
    font-size: 9px;
    color: var(--vscode-descriptionForeground);
    margin-top: 6px;
    opacity: 0.8;
    font-style: italic;
    display: flex;
    align-items: center;
    gap: 6px;
}

.include-type-label {
    padding: 2px 4px !important;
    border-radius: 3px !important;
    font-size: 8px !important;
    font-weight: bold !important;
    text-transform: uppercase !important;
    flex-shrink: 0 !important;
    margin-left: 6px !important;
    display: inline-block !important;
    background: #666 !important;
    color: white !important;
    z-index: 9999 !important;
    vertical-align: middle !important;
}

.file-name-clickable {
    display: inline-block;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-weight: 500;
    color: var(--vscode-textLink-foreground);
    cursor: pointer;
    text-decoration: underline;
    text-decoration-color: transparent;
    transition: text-decoration-color 0.2s ease;
}

.file-name-clickable:hover {
    text-decoration-color: var(--vscode-textLink-foreground);
    color: var(--vscode-textLink-activeForeground);
}

.status-icon {
    font-size: 14px;
    cursor: help;
}

.status-icon.na {
    color: var(--vscode-descriptionForeground);
    opacity: 0.5;
}

.action-buttons {
    display: flex;
    gap: 4px;
    justify-content: left;
    align-items: center;
}

.action-btn {
    background: var(--button-background);
    border: var(--button-border);
    color: var(--button-foreground);
    padding: 4px 6px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 28px;
    height: 24px;
    transition: opacity 0.15s ease;
}

.action-btn:hover {
    opacity: 0.8;
}

.save-btn {
    background: transparent;
    border: none;
    color: var(--vscode-gitDecoration-addedResourceForeground);
}

.reload-btn {
    background: transparent;
    border: none;
    color: var(--vscode-gitDecoration-modifiedResourceForeground);
}

.reload-images-btn {
    background: transparent;
    border: none;
    color: var(--vscode-foreground);
    opacity: 0.7;
}

/* Icon Legend styles */
.icon-legend {
    padding-top: 4px;
    border-top: 1px solid var(--vscode-panel-border);
    display: grid;
    grid-template-columns: repeat(2, 1fr);
}

.legend-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--vscode-descriptionForeground);
    margin-bottom: 6px;
    text-transform: uppercase;
}

.legend-items {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 4px 12px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
}

.legend-icon {
    font-size: 12px;
}

.legend-section {
    margin-bottom: 8px;
}

.legend-section:last-child {
    margin-bottom: 0;
}

.legend-badge {
    min-width: 35px;
    padding: 1px 3px;
    font-size: 7px;
}

.file-states-list {
    max-height: 600px;
    overflow-y: auto;
    scrollbar-width: thin;
}

/* Force Write & Verification Styles */
.force-write-confirmation-overlay,
.verification-results-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 10001;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--vscode-font-family);
}

.confirmation-dialog,
.verification-dialog {
    background: var(--vscode-editor-background);
    border: 2px solid var(--vscode-panel-border);
    border-radius: 8px;
    max-width: 600px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}

.confirmation-header,
.verification-header {
    padding: 16px;
    border-bottom: 1px solid var(--vscode-panel-border);
    background: var(--vscode-titleBar-activeBackground);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.confirmation-header h3,
.verification-header h3 {
    margin: 0;
    color: var(--vscode-titleBar-activeForeground);
}

.confirmation-content,
.verification-content {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.confirmation-content p {
    margin: 8px 0;
}

.confirmation-content ul {
    margin: 8px 0;
    padding-left: 20px;
}

.affected-files {
    margin-top: 16px;
    padding: 12px;
    background: var(--vscode-textBlockQuote-background);
    border-radius: 4px;
    max-height: 200px;
    overflow-y: auto;
}

.affected-files ul {
    margin: 8px 0 0 0;
    padding-left: 20px;
}

.confirmation-actions,
.verification-actions {
    padding: 16px;
    border-top: 1px solid var(--vscode-panel-border);
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

.btn-cancel,
.btn-close {
    padding: 8px 16px;
    background: var(--button-secondary-background);
    color: var(--button-secondary-foreground);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
}

.btn-cancel:hover,
.btn-close:hover {
    background: var(--button-secondary-background-hover);
}

.btn-confirm,
.btn-force-write {
    padding: 8px 16px;
    background: var(--vscode-gitDecoration-modifiedResourceForeground);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
}

.btn-confirm:hover,
.btn-force-write:hover {
    opacity: 0.9;
}

/* Verification dialog close button - different style from modal .close-btn */
.verification-close-btn {
    background: transparent;
    border: none;
    color: var(--vscode-titleBar-activeForeground);
    font-size: 18px;
    cursor: pointer;
    padding: 4px 8px;
}

.verification-close-btn:hover {
    opacity: 0.7;
}

.verification-summary {
    display: flex;
    gap: 24px;
    margin-bottom: 20px;
    padding: 12px;
    background: var(--vscode-textBlockQuote-background);
    border-radius: 4px;
}

.summary-stat {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.summary-stat .stat-label {
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
}

.summary-stat .stat-value {
    font-size: 20px;
    font-weight: bold;
}

.verification-details {
    margin-top: 16px;
}

.file-results-list {
    margin-top: 12px;
    max-height: 300px;
    overflow-y: auto;
}

.file-result-item {
    padding: 8px;
    margin: 4px 0;
    border-radius: 4px;
    border: 1px solid var(--vscode-panel-border);
}

.file-result-item.match {
    background: rgba(0, 128, 0, 0.1);
}

.file-result-item.mismatch {
    background: rgba(255, 165, 0, 0.1);
}

.file-result-name {
    font-weight: 500;
    margin-bottom: 4px;
}

.file-result-status {
    font-size: 12px;
    margin-bottom: 2px;
}

.file-result-hashes {
    font-size: 10px;
    color: var(--vscode-descriptionForeground);
    font-family: var(--vscode-editor-font-family);
}

.verification-timestamp {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--vscode-panel-border);
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
    text-align: right;
}

.verification-success {
    border-color: var(--vscode-gitDecoration-addedResourceForeground);
}

.verification-warning {
    border-color: var(--vscode-gitDecoration-modifiedResourceForeground);
}

/* Sync Details Section Styles */
.sync-details-section {
    margin-top: 12px;
    border: 1px solid var(--vscode-panel-border);
    border-radius: 4px;
    overflow: hidden;
}

.sync-details-header {
    padding: 8px 12px;
    background: var(--vscode-list-inactiveSelectionBackground);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
}

.sync-details-header:hover {
    background: var(--vscode-list-hoverBackground);
}

.sync-details-toggle {
    font-size: 10px;
    transition: transform 0.2s ease;
}

.sync-details-section.expanded .sync-details-toggle {
    transform: rotate(90deg);
}

.sync-details-title {
    font-weight: 600;
    font-size: 12px;
    flex: 1;
}

.sync-details-hint {
    font-size: 11px;
    color: var(--vscode-descriptionForeground);
    font-style: italic;
}

.sync-details-status {
    font-size: 11px;
    font-weight: 500;
}

.sync-details-content {
    padding: 12px;
    background: var(--vscode-editor-background);
    border-top: 1px solid var(--vscode-panel-border);
}

.sync-details-summary {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
    padding: 8px;
    background: var(--vscode-textBlockQuote-background);
    border-radius: 4px;
    flex-wrap: wrap;
}

.sync-stat {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.sync-stat-label {
    font-size: 10px;
    color: var(--vscode-descriptionForeground);
}

.sync-stat-value {
    font-size: 16px;
    font-weight: bold;
}

.sync-stat-good .sync-stat-value {
    color: var(--vscode-gitDecoration-addedResourceForeground);
}

.sync-stat-warn .sync-stat-value {
    color: var(--vscode-gitDecoration-modifiedResourceForeground);
}

.sync-stat-timestamp {
    font-size: 10px;
    color: var(--vscode-descriptionForeground);
    margin-left: auto;
    align-self: center;
}

.sync-details-files {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.sync-file-detail {
    padding: 8px;
    border: 1px solid var(--vscode-panel-border);
    border-radius: 4px;
    background: var(--vscode-editor-background);
}

.sync-file-detail.sync-match {
    border-left: 3px solid var(--vscode-gitDecoration-addedResourceForeground);
}

.sync-file-detail.sync-mismatch {
    border-left: 3px solid var(--vscode-gitDecoration-modifiedResourceForeground);
    background: rgba(255, 165, 0, 0.05);
}

.sync-file-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.sync-file-icon {
    font-size: 14px;
}

.sync-file-name {
    font-weight: 500;
    font-size: 12px;
    font-family: var(--vscode-editor-font-family);
}

.sync-file-stats {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding-left: 22px;
}

.sync-file-stat {
    display: flex;
    gap: 8px;
    font-size: 11px;
    font-family: var(--vscode-editor-font-family);
}

.sync-file-stat-label {
    color: var(--vscode-descriptionForeground);
    min-width: 70px;
}

.sync-file-stat-value {
    color: var(--vscode-foreground);
}

.sync-match-indicator {
    color: var(--vscode-gitDecoration-addedResourceForeground);
}

.sync-mismatch-indicator {
    color: var(--vscode-gitDecoration-modifiedResourceForeground);
}

.sync-unknown-indicator {
    color: var(--vscode-descriptionForeground);
    font-style: italic;
    opacity: 0.7;
}

.sync-details-note {
    padding: 8px 12px;
    margin-bottom: 12px;
    background: rgba(100, 150, 200, 0.1);
    border-left: 3px solid var(--vscode-textLink-foreground);
    border-radius: 4px;
    font-size: 12px;
    color: var(--vscode-foreground);
}

.baseline-stat {
    background: rgba(100, 150, 200, 0.05);
    padding: 4px;
    border-radius: 3px;
    margin-bottom: 4px;
}

.baseline-stat .sync-file-stat-label {
    font-weight: 600;
    color: var(--vscode-textLink-foreground);
}

/* Marp Global Settings Button and Menu */
.marp-global-settings-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  padding: 2px 6px;
  font-size: 14px;
  line-height: 1;
  transition: all 0.2s;
  border-radius: 3px;
  height: 20px;
  min-width: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.marp-global-settings-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

.marp-settings-icon {
  font-size: 13px;
}

.marp-global-settings-menu {
  position: absolute;
  top: 30px;
  left: 0;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  z-index: 2147483640;
  padding: 8px;
  min-width: 300px;
  max-width: 400px;
  max-height: 600px;
  overflow-y: auto;
}

.marp-settings-section {
  margin-bottom: 12px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--vscode-widget-border, rgba(128, 128, 128, 0.3));
}

.marp-settings-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.marp-settings-header {
  font-weight: 600;
  font-size: 11px;
  color: var(--vscode-descriptionForeground);
  text-transform: uppercase;
  margin-bottom: 8px;
}

.marp-setting-item {
  margin-bottom: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.marp-setting-item label {
  font-size: 12px;
  color: var(--vscode-foreground);
  font-weight: 500;
}

.marp-setting-item input[type="text"],
.marp-setting-item select,
.marp-setting-item textarea {
  background: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  border: 1px solid var(--vscode-input-border, transparent);
  border-radius: 2px;
  padding: 4px 6px;
  font-size: 12px;
  font-family: var(--vscode-font-family);
  width: 100%;
}

.marp-setting-item input[type="text"]:focus,
.marp-setting-item select:focus,
.marp-setting-item textarea:focus {
  outline: 1px solid var(--vscode-focusBorder);
  outline-offset: -1px;
}

.marp-setting-item textarea {
  resize: vertical;
  min-height: 60px;
}

/* Marp Global Settings Burger Menu */
.marp-global-menu {
  position: relative;
  display: inline-block;
}

.marp-global-menu-btn {
  background: var(--button-background);
  color: var(--button-foreground);
  border: var(--button-border);
  cursor: pointer;
  padding: 4px 4px;
  margin: 0;
  height: 22px;
  min-height: 22px;
  width: 22px;
  min-width: 22px;
  justify-content: center;
  gap: 4px;
  font-size: 12px;
  border-radius: 3px;
  display: flex;
  align-items: center;
  transition: all 0.2s;
}

.marp-global-menu-btn:hover {
  background: var(--button-background-hover);
  color: var(--button-foreground-hover);
}

.marp-global-menu-dropdown {
  display: none;
  position: fixed;
  background: var(--vscode-dropdown-background);
  border: 1px solid var(--vscode-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  z-index: 2147483640;
  padding: 0;
  min-width: 320px;
  max-width: 450px;
  max-height: 70vh;
  overflow-y: auto;
}

.marp-global-menu.active .marp-global-menu-dropdown {
  display: block;
}

.marp-global-menu-item {
  padding: 4px 8px;
  cursor: pointer;
  font-size: 13px;
  color: var(--vscode-dropdown-foreground);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  position: relative;
  transition: background-color 0.2s;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 8px;
}

.marp-global-menu-item:hover {
  background: var(--vscode-list-hoverBackground);
  color: var(--vscode-list-hoverForeground);
}

.marp-global-menu-item .menu-icon {
  flex-shrink: 0;
  width: 16px;
  text-align: center;
}

.marp-global-menu-divider {
  height: 1px;
  background: var(--vscode-menu-separatorBackground, rgba(128, 128, 128, 0.35));
  margin: 4px 0;
}

/* PDF Slideshow Styles */

/* Wrapper for PDF slideshow with burger menu */
.pdf-slideshow-wrapper {
  position: relative;
  display: block;
}

.pdf-slideshow-wrapper .image-menu-btn {
  position: absolute;
  top: 4px;
  right: 4px;
}

.pdf-slideshow {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 10px 0;
}

.pdf-slideshow-image {
  min-height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--vscode-editor-background);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
  padding: 10px;
}

.pdf-slideshow-image img {
  max-width: 100%;
  height: auto;
  display: block;
}

.pdf-slideshow-loading {
  color: var(--vscode-foreground);
  padding: 20px;
  text-align: center;
}

.pdf-slideshow-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 8px;
  background: var(--vscode-editor-background);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 4px;
}

.pdf-slideshow-btn {
  padding: 6px 12px;
  background: var(--vscode-button-background);
  color: var(--vscode-button-foreground);
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 13px;
  font-family: var(--vscode-font-family);
  transition: background 0.2s;
}

.pdf-slideshow-btn:hover:not(:disabled) {
  background: var(--vscode-button-hoverBackground);
}

.pdf-slideshow-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.pdf-slideshow-page-info {
  color: var(--vscode-foreground);
  font-size: 13px;
  font-family: var(--vscode-font-family);
  min-width: 100px;
  text-align: center;
}

/* ============================================================================
   TEMPLATE BAR STYLES
   ============================================================================ */

.template-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  background: var(--vscode-sideBar-background, #252526);
  border-bottom: 1px solid var(--vscode-panel-border, #3c3c3c);
  min-height: 40px;
  flex-shrink: 0;
}

.template-bar-label {
  color: var(--vscode-descriptionForeground, #888);
  font-size: 12px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.template-items {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}

.template-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--vscode-button-secondaryBackground, #3a3d41);
  color: var(--vscode-button-secondaryForeground, #fff);
  border: 1px solid var(--vscode-contrastBorder, transparent);
  border-radius: 4px;
  cursor: grab;
  font-size: 13px;
  font-family: var(--vscode-font-family);
  transition: background 0.15s, transform 0.15s, box-shadow 0.15s;
  user-select: none;
}

.template-item:hover {
  background: var(--vscode-button-secondaryHoverBackground, #45494e);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.template-item:active {
  cursor: grabbing;
  transform: translateY(0);
}

.template-item.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.template-name {
  white-space: nowrap;
}

/* Template drop indicator - shown when dragging template over board */
.template-drop-indicator {
  position: absolute;
  width: 4px;
  background: var(--vscode-focusBorder, #007acc);
  border-radius: 2px;
  pointer-events: none;
  z-index: 1000;
  box-shadow: 0 0 8px var(--vscode-focusBorder, #007acc);
}

/* Column drop zone highlight when template is being dragged - same as column drag */
.column-drop-zone.template-drag-over {
  background: var(--vscode-editor-selectionBackground);
  border: 2px dashed var(--vscode-editor-selectionForeground);
  border-radius: 4px;
}

/* Template source in file-info header (next to clipboard/empty card) */
.template-source {
  display: flex;
  align-items: center;
  gap: 4px;
  border: var(--button-border);
  padding: 2px 4px;
  margin: 0;
  height: 22px;
  min-height: 22px;
  min-width: 22px;
  background: var(--button-alternative-background);
  color: var(--button-alternative-foreground);
  cursor: pointer;
  border-radius: 3px;
  font-size: 12px;
  white-space: nowrap;
}

.template-source:hover {
  background: var(--button-alternative-background-hover);
  color: var(--button-alternative-foreground-hover);
}

.template-icon {
  font-size: 14px;
  line-height: 1;
}

.template-select {
  background: transparent;
  border: none;
  color: inherit;
  font-size: 12px;
  font-family: inherit;
  cursor: pointer;
  padding: 0 2px;
  max-width: 120px;
}

.template-select:focus {
  outline: none;
}

.template-select option {
  background: var(--vscode-dropdown-background, #3c3c3c);
  color: var(--vscode-dropdown-foreground, #fff);
}

.template-drag-handle {
  cursor: grab;
  padding: 0 4px;
  font-size: 12px;
  opacity: 0.6;
  user-select: none;
}

.template-drag-handle:hover {
  opacity: 1;
}

.template-drag-handle.dragging {
  cursor: grabbing;
  opacity: 0.4;
}

/* ============================================================================
   TEMPLATE VARIABLE DIALOG STYLES
   ============================================================================ */

.template-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(2px);
}

.template-dialog {
  background: var(--vscode-editor-background, #1e1e1e);
  border: 1px solid var(--vscode-panel-border, #3c3c3c);
  border-radius: 6px;
  min-width: 400px;
  max-width: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.template-dialog-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--vscode-panel-border, #3c3c3c);
}

.template-dialog-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--vscode-foreground);
}

.template-dialog-close {
  background: transparent;
  border: none;
  color: var(--vscode-foreground);
  font-size: 20px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  opacity: 0.7;
  transition: opacity 0.15s;
}

.template-dialog-close:hover {
  opacity: 1;
  background: var(--vscode-toolbar-hoverBackground, rgba(255, 255, 255, 0.1));
}

.template-dialog-form {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.template-dialog-field {
  margin-bottom: 16px;
}

.template-dialog-field:last-child {
  margin-bottom: 0;
}

.template-dialog-field label {
  display: block;
  margin-bottom: 6px;
  font-size: 13px;
  color: var(--vscode-foreground);
  font-weight: 500;
}

.template-dialog-field label .required {
  color: var(--vscode-errorForeground, #f14c4c);
}

.template-dialog-field input {
  width: 100%;
  padding: 8px 12px;
  font-size: 13px;
  font-family: var(--vscode-font-family);
  background: var(--vscode-input-background, #3c3c3c);
  color: var(--vscode-input-foreground, #fff);
  border: 1px solid var(--vscode-input-border, #3c3c3c);
  border-radius: 4px;
  transition: border-color 0.15s;
}

.template-dialog-field input:focus {
  outline: none;
  border-color: var(--vscode-focusBorder, #007acc);
}

.template-dialog-field input::placeholder {
  color: var(--vscode-input-placeholderForeground, #888);
}

.template-dialog-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid var(--vscode-panel-border, #3c3c3c);
}

.template-dialog-btn {
  padding: 8px 16px;
  font-size: 13px;
  font-family: var(--vscode-font-family);
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
}

.template-dialog-cancel {
  background: transparent;
  color: var(--vscode-foreground);
  border: 1px solid var(--vscode-button-secondaryBackground, #3a3d41);
}

.template-dialog-cancel:hover {
  background: var(--vscode-button-secondaryHoverBackground, #45494e);
}

.template-dialog-submit {
  background: var(--vscode-button-background, #0e639c);
  color: var(--vscode-button-foreground, #fff);
  border: none;
}

.template-dialog-submit:hover {
  background: var(--vscode-button-hoverBackground, #1177bb);
}

/* ============================================================================
   Tag Applied Flash Animation
   Used for visual feedback when a tag is applied to a column or task
   ============================================================================ */
@keyframes tag-applied-flash {
  0% { box-shadow: 0 0 8px rgba(0, 255, 0, 0.5); }
  100% { box-shadow: none; }
}

.tag-applied-flash {
  animation: tag-applied-flash 0.3s ease-out forwards;
}

/* ============================================================================
   Menu Count Badges
   Small count indicators shown in dropdown menus
   ============================================================================ */
.menu-count-badge {
  opacity: 0.7;
  margin-left: auto;
  padding-left: 10px;
}

/* ============================================================================
   Submenu Base Styles
   Base positioning for tag and other submenus
   ============================================================================ */
.donut-submenu {
  position: fixed;
  z-index: 2147483647;
  pointer-events: all;
  visibility: hidden;
  display: flex;
  flex-wrap: wrap;
}

.donut-submenu.visible {
  visibility: visible;
}

/* ============================================================================
   Pre-generated Font Size Classes
   Static font size multipliers for UI scaling
   ============================================================================ */

/* Font Size Classes - 0.5x */
body.font-size-0_5x .column-title,
body.font-size-0_5x .column-title-edit,
body.font-size-0_5x .task-title-display,
body.font-size-0_5x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 0.5) !important;
  line-height: 1.4 !important;
}

body.font-size-0_5x .task-description-display,
body.font-size-0_5x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 0.45) !important;
  line-height: 1.4 !important;
}

/* Font Size Classes - 0.75x */
body.font-size-0_75x .column-title,
body.font-size-0_75x .column-title-edit,
body.font-size-0_75x .task-title-display,
body.font-size-0_75x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 0.75) !important;
  line-height: 1.4 !important;
}

body.font-size-0_75x .task-description-display,
body.font-size-0_75x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 0.675) !important;
  line-height: 1.4 !important;
}

/* Font Size Classes - 1x (default) */
body.font-size-1x .column-title,
body.font-size-1x .column-title-edit,
body.font-size-1x .task-title-display,
body.font-size-1x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1) !important;
  line-height: 1.4 !important;
}

body.font-size-1x .task-description-display,
body.font-size-1x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 0.9) !important;
  line-height: 1.4 !important;
}

/* Font Size Classes - 1.25x */
body.font-size-1_25x .column-title,
body.font-size-1_25x .column-title-edit,
body.font-size-1_25x .task-title-display,
body.font-size-1_25x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1.25) !important;
  line-height: 1.4 !important;
}

body.font-size-1_25x .task-description-display,
body.font-size-1_25x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1.125) !important;
  line-height: 1.4 !important;
}

/* Font Size Classes - 1.5x */
body.font-size-1_5x .column-title,
body.font-size-1_5x .column-title-edit,
body.font-size-1_5x .task-title-display,
body.font-size-1_5x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1.5) !important;
  line-height: 1.2 !important;
}

body.font-size-1_5x .task-description-display,
body.font-size-1_5x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1.35) !important;
  line-height: 1.3 !important;
}

/* Font Size Classes - 2x */
body.font-size-2x .column-title,
body.font-size-2x .column-title-edit,
body.font-size-2x .task-title-display,
body.font-size-2x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 2) !important;
  line-height: 1.1 !important;
}

body.font-size-2x .task-description-display,
body.font-size-2x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 1.8) !important;
  line-height: 1.15 !important;
}

/* Font Size Classes - 2.5x */
body.font-size-2_5x .column-title,
body.font-size-2_5x .column-title-edit,
body.font-size-2_5x .task-title-display,
body.font-size-2_5x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 2.5) !important;
  line-height: 1.1 !important;
}

body.font-size-2_5x .task-description-display,
body.font-size-2_5x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 2.25) !important;
  line-height: 1.15 !important;
}

/* Font Size Classes - 3x */
body.font-size-3x .column-title,
body.font-size-3x .column-title-edit,
body.font-size-3x .task-title-display,
body.font-size-3x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 3) !important;
  line-height: 1.1 !important;
}

body.font-size-3x .task-description-display,
body.font-size-3x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 2.7) !important;
  line-height: 1.15 !important;
}

/* Font Size Classes - 4x */
body.font-size-4x .column-title,
body.font-size-4x .column-title-edit,
body.font-size-4x .task-title-display,
body.font-size-4x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 4) !important;
  line-height: 1.1 !important;
}

body.font-size-4x .task-description-display,
body.font-size-4x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 3.6) !important;
  line-height: 1.15 !important;
}

/* Font Size Classes - 5x */
body.font-size-5x .column-title,
body.font-size-5x .column-title-edit,
body.font-size-5x .task-title-display,
body.font-size-5x .task-title-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 5) !important;
  line-height: 1.1 !important;
}

body.font-size-5x .task-description-display,
body.font-size-5x .task-description-edit {
  font-size: calc(var(--vscode-font-size, 14px) * 4.5) !important;
  line-height: 1.15 !important;
}

/* ============================================================================
   File Search Modal Styles
   ============================================================================ */

.file-search-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.15s, visibility 0.15s;
}

.file-search-overlay.visible {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

.file-search-dialog {
    width: 80%;
    max-width: 1200px;
    min-width: 400px;
    height: 80vh;
    margin-top: 5vh;
    display: flex;
    flex-direction: column;
    background: var(--vscode-editor-background, #1e1e1e);
    border: 1px solid var(--vscode-widget-border, #454545);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    transform: translateY(-20px);
    transition: transform 0.15s;
}

.file-search-overlay.visible .file-search-dialog {
    transform: translateY(0);
}

.file-search-header {
    padding: 16px 20px;
    background: var(--vscode-titleBar-activeBackground, #3c3c3c);
    border-bottom: 1px solid var(--vscode-widget-border, #454545);
}

.file-search-title {
    font-size: var(--vscode-font-size, 14px);
    font-weight: 600;
    font-family: var(--vscode-font-family);
    margin-bottom: 8px;
    color: var(--vscode-titleBar-activeForeground, #ffffff);
}

.file-search-subtitle {
    font-size: 12px;
    font-family: var(--vscode-editor-font-family, monospace);
    color: var(--vscode-descriptionForeground, #969696);
    /* Truncate from start, showing filename at end */
    display: block;
    max-height: calc(2 * 1.4em);
    line-height: 1.4em;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    direction: rtl;
    unicode-bidi: plaintext;  /* Preserve LTR text order within RTL container */
    cursor: default;
}

.file-search-subtitle:hover {
    max-height: none;
    overflow: visible;
    white-space: normal;
    word-break: break-all;
}

.file-search-broken-info {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
}

.file-search-badge {
    background: var(--vscode-badge-background, #4d4d4d);
    color: var(--vscode-badge-foreground, #ffffff);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
    font-weight: 500;
}

.file-search-badge.warning {
    background: var(--vscode-inputValidation-warningBackground, #352a05);
    border: 1px solid var(--vscode-inputValidation-warningBorder, #be8c00);
}

.file-search-input-container {
    padding: 12px 20px;
    background: var(--vscode-input-background, #3c3c3c);
    border-bottom: 1px solid var(--vscode-widget-border, #454545);
    display: flex;
    gap: 8px;
    align-items: center;
}

.file-search-input {
    flex: 1;
    padding: 8px 12px;
    font-size: var(--vscode-font-size, 14px);
    font-family: var(--vscode-font-family);
    border: 1px solid var(--vscode-input-border, #3c3c3c);
    background: var(--vscode-input-background, #3c3c3c);
    color: var(--vscode-input-foreground, #cccccc);
    border-radius: 4px;
    outline: none;
}

.file-search-input:focus {
    border-color: var(--vscode-focusBorder, #007acc);
}

.file-search-toggle-btn {
    padding: 6px 10px;
    font-size: 12px;
    font-family: var(--vscode-font-family);
    border: 1px solid var(--vscode-button-border, transparent);
    background: var(--vscode-button-secondaryBackground, #3c3c3c);
    color: var(--vscode-button-secondaryForeground, #cccccc);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
}

.file-search-toggle-btn:hover {
    background: var(--vscode-button-secondaryHoverBackground, #4c4c4c);
}

.file-search-toggle-btn.active {
    background: var(--vscode-button-background, #007acc);
    color: var(--vscode-button-foreground, #ffffff);
}

.file-search-results {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

.file-search-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}

.file-search-table th {
    position: relative;
}

/* Column resize handle */
.col-resize-handle {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 8px;
    cursor: col-resize;
    background: transparent;
    border-right: 2px solid var(--vscode-widget-border, #454545);
    transition: border-color 0.15s;
}

.col-resize-handle:hover {
    border-right-color: var(--vscode-button-background, #007acc);
}

/* Disable pointer events on overlay background during resize */
.file-search-overlay.resizing {
    pointer-events: none;
}

.file-search-overlay.resizing .file-search-dialog {
    pointer-events: auto;
}

/* Filename column - compact with word wrap */
.file-search-table th:first-child,
.file-search-table td:first-child {
    word-break: break-word;
}

/* Path column - takes remaining space */
.file-search-table th:nth-child(2),
.file-search-table td:nth-child(2) {
    width: auto;
}

.file-search-table th {
    position: sticky;
    top: 0;
    background: var(--vscode-titleBar-activeBackground, #3c3c3c);
    padding: 8px 12px;
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    font-family: var(--vscode-font-family);
    text-transform: uppercase;
    color: var(--vscode-descriptionForeground, #969696);
    border-bottom: 1px solid var(--vscode-widget-border, #454545);
}

.file-search-table td {
    padding: 8px 12px;
    vertical-align: top;
    border-bottom: 1px solid var(--vscode-widget-border, #333);
}

.file-search-table tr {
    cursor: pointer;
    transition: background 0.1s;
}

.file-search-table tbody tr:hover {
    background: var(--vscode-list-hoverBackground, #2a2d2e);
}

.file-search-table tr.selected {
    background: var(--vscode-list-activeSelectionBackground, #094771);
}

.file-search-result-label {
    font-size: 13px;
    font-weight: 500;
    font-family: var(--vscode-font-family);
    color: var(--vscode-foreground, #cccccc);
    word-break: break-word;
    /* Max 2 lines, show end of text (filename visible) */
    display: block;
    max-height: calc(2 * 1.4em);
    line-height: 1.4em;
    overflow: hidden;
    direction: rtl;
    text-align: left;
}

.file-search-table tr:hover .file-search-result-label {
    max-height: none;
    overflow: visible;
    direction: ltr;
}

.file-search-result-path {
    font-size: 11px;
    color: var(--vscode-descriptionForeground, #969696);
    word-break: break-all;
    font-family: var(--vscode-editor-font-family, monospace);
    margin-top: 2px;
}

.file-search-batch-count {
    text-align: center;
    font-size: 12px;
}

.file-search-batch-count .found {
    color: var(--vscode-charts-green, #89d185);
}

.file-search-batch-count .missing {
    color: var(--vscode-charts-red, #f48771);
}

.file-search-batch-count .scanning {
    color: var(--vscode-descriptionForeground, #969696);
    font-style: italic;
}

.file-search-batch-panel {
    padding: 12px 20px;
    background: var(--vscode-sideBar-background, #252526);
    border-top: 1px solid var(--vscode-widget-border, #454545);
    max-height: 10%;
    overflow-y: auto;
}

.file-search-batch-title {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--vscode-foreground, #cccccc);
}

.file-search-batch-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.file-search-batch-item {
    font-size: 11px;
    padding: 3px 8px;
    border-radius: 3px;
    background: var(--vscode-badge-background, #4d4d4d);
    color: var(--vscode-badge-foreground, #ffffff);
}

.file-search-batch-item.can-replace {
    color: var(--vscode-inputValidation-infoForeground, #063b49);
    background: var(--vscode-inputValidation-infoBackground, #063b49);
    border: 1px solid var(--vscode-inputValidation-infoBorder, #007acc);
}

.file-search-batch-item.cannot-replace {
    color: var(--vscode-inputValidation-warningForeground, #352a05);
    background: var(--vscode-inputValidation-warningBackground, #352a05);
    border: 1px solid var(--vscode-inputValidation-warningBorder, #be8c00);
}

.file-search-status {
    padding: 20px;
    text-align: center;
    color: var(--vscode-descriptionForeground, #969696);
}

.file-search-status.searching::after {
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    border: 2px solid var(--vscode-progressBar-background, #007acc);
    border-top-color: transparent;
    border-radius: 50%;
    animation: file-search-spin 0.8s linear infinite;
    margin-left: 8px;
    vertical-align: middle;
}

@keyframes file-search-spin {
    to { transform: rotate(360deg); }
}

.file-search-options-row {
    padding: 10px 20px;
    background: var(--vscode-editor-background, #1e1e1e);
    border-top: 1px solid var(--vscode-widget-border, #454545);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
    max-height: 10%;
}

.file-search-batch-option {
    display: flex;
    align-items: center;
    gap: 10px;
}

.file-search-batch-option label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 13px;
}

.file-search-batch-option input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    accent-color: var(--vscode-button-background, #007acc);
}

.file-search-batch-info {
    font-size: 12px;
    color: var(--vscode-descriptionForeground, #969696);
    margin-left: auto;
    font-style: italic;
}

.file-search-path-format {
    display: flex;
    align-items: center;
    gap: 8px;
}

.file-search-path-format-label {
    font-size: 12px;
    color: var(--vscode-descriptionForeground, #969696);
}

.file-search-path-format-btns {
    display: flex;
    gap: 2px;
}

.file-search-format-btn {
    padding: 4px 10px;
    font-size: 11px;
    font-family: var(--vscode-font-family);
    border: 1px solid var(--vscode-button-secondaryBorder, #454545);
    background: var(--vscode-button-secondaryBackground, #3a3d41);
    color: var(--vscode-button-secondaryForeground, #cccccc);
    cursor: pointer;
    transition: all 0.1s;
}

.file-search-format-btn:first-child {
    border-radius: 3px 0 0 3px;
}

.file-search-format-btn:last-child {
    border-radius: 0 3px 3px 0;
}

.file-search-format-btn:hover {
    background: var(--vscode-button-secondaryHoverBackground, #45494e);
}

.file-search-format-btn.active {
    background: var(--vscode-button-background, #007acc);
    color: var(--vscode-button-foreground, #ffffff);
    border-color: var(--vscode-button-background, #007acc);
}

/* Path Preview */
.file-search-path-preview {
    padding: 10px 20px;
    background: var(--vscode-editor-background, #1e1e1e);
    border-top: 1px solid var(--vscode-widget-border, #454545);
    display: flex;
    align-items: center;
    gap: 8px;
    min-height: 36px;
    max-height: 15%;
}

.file-search-path-preview-label {
    font-size: 12px;
    font-family: var(--vscode-font-family);
    color: var(--vscode-descriptionForeground, #969696);
    flex-shrink: 0;
}

.file-search-path-preview-value {
    font-size: 12px;
    font-family: var(--vscode-editor-font-family, monospace);
    /* color: var(--vscode-textPreformat-foreground, #d7ba7d); */
    word-break: break-all;
    flex: 1;
    /* Max 2 lines, show end of text (filename visible) */
    max-height: calc(2 * 1.4em);
    line-height: 1.4em;
    overflow: hidden;
    direction: rtl;
    text-align: left;
    cursor: default;
}

.file-search-path-preview:hover .file-search-path-preview-value {
    max-height: none;
    overflow: visible;
    direction: ltr;
}

.file-search-path-preview:not(.has-value) .file-search-path-preview-value {
    color: var(--vscode-descriptionForeground, #969696);
    font-style: italic;
    font-family: inherit;
}

.file-search-footer {
    padding: 12px 20px;
    background: var(--vscode-titleBar-activeBackground, #3c3c3c);
    border-top: 1px solid var(--vscode-widget-border, #454545);
    display: flex;
    justify-content: flex-end;
    gap: 8px;
}

.file-search-keyboard-hint {
    font-size: 11px;
    color: var(--vscode-descriptionForeground, #969696);
    margin-right: auto;
    display: flex;
    align-items: center;
    gap: 16px;
}

.file-search-keyboard-hint kbd {
    background: var(--vscode-keybindingLabel-background, #333);
    border: 1px solid var(--vscode-keybindingLabel-border, #444);
    border-radius: 3px;
    padding: 2px 6px;
    font-family: inherit;
    font-size: 11px;
}

.file-search-btn {
    padding: 8px 16px;
    font-size: 13px;
    font-family: var(--vscode-font-family);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
}

.file-search-btn-primary {
    background: var(--vscode-button-background, #007acc);
    color: var(--vscode-button-foreground, #ffffff);
}

.file-search-btn-primary:hover {
    background: var(--vscode-button-hoverBackground, #0062a3);
}

.file-search-btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.file-search-btn-secondary {
    background: var(--vscode-button-secondaryBackground, #3c3c3c);
    color: var(--vscode-button-secondaryForeground, #cccccc);
}

.file-search-btn-secondary:hover {
    background: var(--vscode-button-secondaryHoverBackground, #4c4c4c);
}

/* Preview Toggle Button */
.file-search-preview-toggle {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    font-size: 12px;
    font-family: var(--vscode-font-family);
    border: 1px solid var(--vscode-button-secondaryBorder, #454545);
    background: var(--vscode-button-secondaryBackground, #3a3d41);
    color: var(--vscode-descriptionForeground, #969696);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
    margin-right: auto;
    margin-left: 16px;
}

.file-search-preview-toggle:hover {
    background: var(--vscode-button-secondaryHoverBackground, #45494e);
    color: var(--vscode-button-secondaryForeground, #cccccc);
}

.file-search-preview-toggle.active {
    background: var(--vscode-button-background, #007acc);
    color: var(--vscode-button-foreground, #ffffff);
    border-color: var(--vscode-button-background, #007acc);
}

.file-search-preview-toggle .preview-icon {
    font-size: 14px;
}

.file-search-preview-toggle .preview-label {
    font-size: 11px;
}

/* ========================================
   Search Highlight Styles
   Used by Kanban Search sidebar for highlighting search results
   ======================================== */

.search-highlight {
    animation: search-highlight-pulse 2s ease-out;
}

@keyframes search-highlight-pulse {
    0% {
        box-shadow: 0 0 0 4px var(--vscode-focusBorder, #007acc);
    }
    50% {
        box-shadow: 0 0 0 6px var(--vscode-focusBorder, #007acc);
    }
    100% {
        box-shadow: 0 0 0 0 transparent;
    }
}

/* Specific highlight for columns */
.column.search-highlight {
    border-radius: 8px;
}

/* Specific highlight for task cards */
.task-card.search-highlight {
    border-radius: 6px;
}
